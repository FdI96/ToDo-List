(()=>{"use strict";class t{constructor(t,e,n,i,r){if(this.title=t,this.description=e,this.date=n,this.priority=i,r)this.id=r;else{let t=localStorage.getItem("accToDo");t=Number(t),t+=1,this.id=t,localStorage.setItem("accToDo",t)}}removeElement(){const t=JSON.parse(localStorage.getItem("Default")),e=JSON.parse(localStorage.getItem("currentArray"));localStorage.setItem("currentArray",JSON.stringify(e));const n=t=>t.id===this.id,i=t.findIndex(n),r=e.findIndex(n);t.splice(i,1),localStorage.setItem("Default",JSON.stringify(t)),e.splice(r,1);const l=localStorage.getItem("currentProject");localStorage.setItem(l,JSON.stringify(e)),localStorage.setItem("currentArray",JSON.stringify(e));const o=document.getElementById(`${this.id}`);document.getElementById("toDoListShow").removeChild(o)}editElement(){let e=document.getElementById(`${this.id}`);const n=document.createElement("form");e.appendChild(n);const i=document.createElement("input");i.setAttribute("type","text"),i.setAttribute("id",`inputTitleEdit${this.id}`);const r=document.createElement("input");r.setAttribute("type","text"),r.setAttribute("id",`inputDescriptionEdit${this.id}`);const l=document.createElement("input");l.setAttribute("type","date"),l.setAttribute("id",`inputDateEdit${this.id}`);const o=document.createElement("div");o.setAttribute("id",`inputPriorityEdit${this.id}`);let c,d=document.createElement("label");d.innerHTML="Priority:",d.setAttribute("for","priority"),o.appendChild(d);for(let t=0;t<3;t+=1){let e=document.createElement("input");switch(t){case 0:c="low";break;case 1:c="medium";break;case 2:c="urgent"}d=document.createElement("label"),d.setAttribute("for",c),d.innerHTML=c,o.appendChild(d),e.setAttribute("type","radio"),e.setAttribute("name",c),e.setAttribute("id",`${c}${this.id}`),o.appendChild(e)}n.appendChild(i),n.appendChild(r),n.appendChild(l),n.appendChild(o);const a=document.createElement("button");a.setAttribute("type","submit"),a.setAttribute("id","editButtonAccept"),a.innerHTML="Accept",n.appendChild(a),a.addEventListener("click",(()=>{let e=document.getElementById(`inputTitleEdit${this.id}`),n=document.getElementById(`inputDescriptionEdit${this.id}`),i=document.getElementById(`inputDateEdit${this.id}`);const r=document.getElementById(`low${this.id}`),l=document.getElementById(`medium${this.id}`),o=document.getElementById(`urgent${this.id}`);c=null,c=r.checked?r.name:l.checked?l.name:o.name;let d=new t(e.value,n.value,i.value,c,this.id),a=JSON.parse(localStorage.getItem("Default")),s=a.findIndex((t=>t.id==this.id));a[s]=d,localStorage.setItem("Default",JSON.stringify(a));let u=localStorage.getItem("currentProject"),m=JSON.parse(localStorage.getItem(`${u}`));s=m.findIndex((t=>t.id==this.id)),m[s]=d,localStorage.setItem(`${u}`,JSON.stringify(m)),localStorage.setItem("currentArray",JSON.stringify(m))}))}print(){const t=document.createElement("div");let e=null;e="low"===this.priority?"primary":"medium"===this.priority?"warning":"danger",t.setAttribute("class",`card text-white bg-${e}`),t.setAttribute("id",`${this.id}`);const n=document.createElement("div");n.setAttribute("id","cardTitle"),n.setAttribute("class","card-header text-white"),n.innerHTML=this.title,t.appendChild(n);const i=document.createElement("div");i.setAttribute("class","card-body text-white"),i.setAttribute("id","body"),t.appendChild(i);const r=document.createElement("h5");r.setAttribute("id",`description${this.id}`),r.setAttribute("class","card-title text-white"),r.innerHTML=this.description,i.appendChild(r);let l=document.createElement("p");l.setAttribute("class","card-text text-white"),l.setAttribute("id","dateToDo"),l.innerHTML=this.date,i.appendChild(l),l=document.createElement("p"),l.setAttribute("class","card-text text-white"),l.setAttribute("id","priorityToDo"),l.innerHTML=this.priority,i.appendChild(l);const o=document.createElement("div");o.setAttribute("class","row container"),t.appendChild(o);const c=document.createElement("button");c.setAttribute("id","deleteButton"),c.setAttribute("class","col-2"),c.innerHTML="Delete",o.appendChild(c),c.addEventListener("click",(()=>this.removeElement()));const d=document.createElement("button");return d.setAttribute("id","editButton"),d.setAttribute("class","col-2"),d.innerHTML="Edit",o.appendChild(d),d.addEventListener("click",(()=>this.editElement())),t}}const e=t;let n=JSON.parse(localStorage.getItem("projectsArray"));n=n||["Default"],localStorage.setItem("projectsArray",JSON.stringify(n));let i=localStorage.getItem("currentProject");i??=localStorage.setItem("currentProject","Default");let r=JSON.parse(localStorage.getItem(`${i}`));null!==r&&r!==[]||(r=[]),localStorage.setItem("currentArray",JSON.stringify(r));let l=JSON.parse(localStorage.getItem("allToDosArray"));l??=[],localStorage.setItem("allToDosArray",JSON.stringify(l)),null==localStorage.getItem("accToDo")&&localStorage.setItem("accToDo",0);let o=localStorage.getItem("currentProject");o??=localStorage.setItem("currentProject","Default"),null==JSON.parse(localStorage.getItem("Default"))&&localStorage.setItem("Default",JSON.stringify([]));let c=JSON.parse(localStorage.getItem(`${o}`));null!==c&&c!==[]||(c=[]),localStorage.setItem("currentArray",JSON.stringify(c));const d=document.getElementById("content"),a=document.createElement("div");a.setAttribute("class","col-4"),a.setAttribute("id","projectList"),d.appendChild(a);const s=document.createElement("div");s.setAttribute("class","col-8"),s.setAttribute("id","toDoList"),d.appendChild(s);const u=(()=>{const t=document.getElementById("projectList"),l=document.createElement("div");l.setAttribute("class","row");const o=document.createElement("h1");o.setAttribute("class","col-8"),o.innerHTML="Projects",l.appendChild(o);const c=(()=>{const t=document.createElement("form");t.setAttribute("id","idForm");const e=document.createElement("input");e.setAttribute("type","text"),e.setAttribute("placeholder","Project name"),e.setAttribute("id","nameField"),t.appendChild(e);const n=document.createElement("span");n.setAttribute("class","col-4");const i=document.createElement("button");return i.setAttribute("type","submit"),i.setAttribute("id","buttonSubmit"),i.innerHTML="Add project",n.appendChild(i),t.appendChild(n),t})();l.appendChild(c);const d=document.createElement("ul");for(let t=0;t<n.length;t+=1){const l=document.createElement("li"),o=document.createElement("button");o.innerHTML=n[t],o.addEventListener("click",(t=>{localStorage.setItem("currentProject",t.target.innerHTML);const n=t.target.innerHTML,i=localStorage.getItem(n),r=JSON.parse(`${i}`);localStorage.setItem("currentArray",JSON.stringify(r));const l=document.getElementById("toDoListShow");l.innerHTML=null;const o="Default"===localStorage.getItem("currentProject")?JSON.parse(localStorage.getItem("Default")):JSON.parse(localStorage.getItem("currentArray"));for(let t=0;t<o.length;t+=1){const n=new e(o[t].title,o[t].description,o[t].date,o[t].priority,o[t].id);if(n.id){const t=n.print();l.appendChild(t),document.getElementById("toDoList").appendChild(l)}}})),l.appendChild(o),d.appendChild(l),r=JSON.parse(localStorage.getItem(i))}return t.appendChild(l),t.appendChild(d),c.children[1].children[0].addEventListener("click",(()=>{n.push(c.children[0].value);const t=document.createElement("li"),i=document.createElement("button");i.innerHTML=c.children[0].value,i.addEventListener("click",(t=>{localStorage.setItem("currentProject",t.target.innerHTML);const n=localStorage.getItem("currentProject");r=JSON.parse(localStorage.getItem(n)),localStorage.setItem("currentArray",JSON.stringify(r)),document.getElementById("toDoListShow").innerHTML=null;for(let t=0;t<r.length;t+=1){const n=new e(r[t].title,r[t].description,r[t].date,r[t].priority,r[t].id);if(n.id){const t=n.print();document.getElementById("toDoListShow").appendChild(t)}}})),localStorage.setItem("currentProject",c.children[0].value);const l=c.children[0].value;localStorage.setItem(`${l}`,JSON.stringify([])),localStorage.setItem("currentArray",JSON.stringify([])),document.getElementById("toDoListShow").innerHTML=null,t.appendChild(i),d.appendChild(t),localStorage.setItem("projectsArray",JSON.stringify(n))})),t})();d.appendChild(u);const m=(()=>{const t=document.getElementById("toDoList"),n=document.createElement("h2");n.setAttribute("class","text-center"),n.innerHTML="List of ToDo",t.appendChild(n);const i=document.createElement("div");i.setAttribute("class","toDoListBlock"),i.appendChild((()=>{const t=document.createElement("form"),e=document.createElement("div");t.appendChild(e);let n=document.createElement("label");n.setAttribute("for","title"),n.innerHTML="Title:",e.appendChild(n);let i=document.createElement("input");i.setAttribute("type","text"),i.setAttribute("name","title"),i.setAttribute("id","title"),e.appendChild(i);const r=document.createElement("div");t.appendChild(r),n=document.createElement("label"),n.innerHTML="Description:",n.setAttribute("for","description"),r.appendChild(n),i=document.createElement("input"),i.setAttribute("type","text"),i.setAttribute("name","description"),i.setAttribute("id","description"),r.appendChild(i);const l=document.createElement("div");t.appendChild(l),n=document.createElement("label"),n.innerHTML="Due Date: ",n.setAttribute("for","dueDate"),l.appendChild(n),i=document.createElement("input"),i.setAttribute("type","date"),i.setAttribute("name","dueDate"),i.setAttribute("id","dueDate"),l.appendChild(i);const o=document.createElement("div");t.appendChild(o),n=document.createElement("label"),n.innerHTML="Priority:",n.setAttribute("for","priority"),o.appendChild(n);for(let t=0;t<3;t+=1){let e;switch(i=document.createElement("input"),t){case 0:e="low";break;case 1:e="medium";break;case 2:e="urgent"}n=document.createElement("label"),n.setAttribute("for",e),n.innerHTML=e,o.appendChild(n),i.setAttribute("type","radio"),i.setAttribute("name",e),i.setAttribute("id",e),o.appendChild(i)}const c=document.createElement("input");return t.appendChild(c),c.setAttribute("type","submit"),c.setAttribute("id","submitButton"),t})()),t.appendChild(i);const r=document.createElement("div");r.setAttribute("id","toDoListShow"),t.appendChild(r);const l=localStorage.getItem("currentProject"),o="Default"===l?JSON.parse(localStorage.getItem("Default")):JSON.parse(localStorage.getItem(`${l}`));for(let t=0;t<o.length;t+=1){const n=new e(o[t].title,o[t].description,o[t].date,o[t].priority,o[t].id);if(n.id){const t=n.print();r.appendChild(t)}}return t})();d.appendChild(m),document.getElementById("submitButton").addEventListener("click",(()=>{const t=document.getElementById("title").value,n=document.getElementById("description").value,i=document.getElementById("dueDate").value,r=(()=>{const t=document.getElementById("low"),e=document.getElementById("medium"),n=document.getElementById("urgent");let i=null;return i=t.checked?t.name:e.checked?e.name:n.name,i})(),d=new e(t,n,i,r),a=document.getElementById("toDoListShow");a.appendChild(d.print()),l.push(d),c=JSON.parse(localStorage.getItem("currentArray")),localStorage.setItem("Default",JSON.stringify(l)),c.push(d),o=localStorage.getItem("currentProject"),localStorage.setItem("currentArray",JSON.stringify(c)),localStorage.setItem(`${o}`,JSON.stringify(c)),localStorage.setItem("allToDosArray",JSON.stringify(l)),m.appendChild(a)}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvdG9Eby5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcHJvamVjdHMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LmpzIiwid2VicGFjazovLy8uL3NyYy9hZGRCdXR0b24uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3RvRG9Db2xsZWN0aW9uLmpzIl0sIm5hbWVzIjpbIlRvRG8iLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwiZGF0ZSIsInByaW9yaXR5IiwiaWQiLCJ0aGlzIiwiYWNjIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsIk51bWJlciIsInNldEl0ZW0iLCJhcnJheURlZmF1bHQiLCJKU09OIiwicGFyc2UiLCJjdXJyZW50QXJyYXkiLCJzdHJpbmdpZnkiLCJmaW5kQnlJZCIsImVsZW1lbnQiLCJpbmRleERlZmF1bHQiLCJmaW5kSW5kZXgiLCJpbmRleENBIiwic3BsaWNlIiwiY3VycmVudFByb2plY3QiLCJjYXJkVG9SZW1vdmUiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwicmVtb3ZlQ2hpbGQiLCJmYXRoZXIiLCJmb3JtRWRpdCIsImNyZWF0ZUVsZW1lbnQiLCJhcHBlbmRDaGlsZCIsImlucHV0VGl0bGUiLCJzZXRBdHRyaWJ1dGUiLCJpbnB1dERlc2NyaXB0aW9uIiwiaW5wdXREYXRlIiwiaW5wdXRQcmlvcml0eU5MYWJlbCIsImxhYmVsIiwiaW5uZXJIVE1MIiwiaW5kZXgiLCJpbnB1dCIsImVkaXRLZXlwYWQiLCJhZGRFdmVudExpc3RlbmVyIiwicHJpb3JpdHlMb3ciLCJwcmlvcml0eU1lZGl1bSIsInByaW9yaXR5VXJnZW50IiwiY2hlY2tlZCIsIm5hbWUiLCJjYXJkIiwidmFsdWUiLCJkZWZhdWx0QXJyYXkiLCJwcm9qZWN0QXJyYXkiLCJjb2xvciIsImJvZHkiLCJib2R5VGl0bGUiLCJib2R5UCIsImtleXBhZCIsImRlbEJ1dHRvbiIsInJlbW92ZUVsZW1lbnQiLCJlZGl0QnV0dG9uIiwiZWRpdEVsZW1lbnQiLCJwcm9qZWN0cyIsImN1cnJlbnRQIiwiYXJyYXlDdXJyZW50IiwiYWxsVG9Eb3MiLCJjb250ZW50IiwicHRMaXN0IiwidG9MaXN0IiwicHJvamVjdExpc3QiLCJkaXZQcm9qZWN0c0J1dHRvbiIsImZvcm0iLCJpbnB1dE5hbWUiLCJzcGFuQWRkQnV0dG9uIiwiYWRkQnV0dG9uIiwidUxpc3QiLCJsZW5ndGgiLCJsaSIsImJ1dHRvbiIsImUiLCJ0YXJnZXQiLCJ0YXJnZXRWYWx1ZSIsImdldFZhbHVlIiwibGlzdCIsImFycmF5QXV4IiwicmVuZGVyQ2FyZCIsInByaW50IiwiY2hpbGRyZW4iLCJwdXNoIiwiaXRlbSIsImtleSIsInRvRG9MaXN0IiwidG9Eb0xpc3RCbG9jayIsImlucHV0VGl0bGVOTGFiZWwiLCJpbnB1dERlc2NyaXB0aW9uTkxhYmVsIiwiaW5wdXREdWVEYXRlTkxhYmVsIiwic3VtYml0QnV0dG9uIiwidG9Eb0xpc3RTaG93IiwiZGVzYyIsInByaW9yIiwiZ2V0UHJpb3JpdHkiLCJ0b0RvIl0sIm1hcHBpbmdzIjoibUJBQUEsTUFBTUEsRUFDSixZQUFZQyxFQUFPQyxFQUFhQyxFQUFNQyxFQUFVQyxHQUs5QyxHQUpBQyxLQUFLTCxNQUFRQSxFQUNiSyxLQUFLSixZQUFjQSxFQUNuQkksS0FBS0gsS0FBT0EsRUFDWkcsS0FBS0YsU0FBV0EsRUFDWkMsRUFDRkMsS0FBS0QsR0FBS0EsTUFDTCxDQUNMLElBQUlFLEVBQU1DLGFBQWFDLFFBQVEsV0FDL0JGLEVBQU1HLE9BQU9ILEdBQ2JBLEdBQU8sRUFDUEQsS0FBS0QsR0FBS0UsRUFDVkMsYUFBYUcsUUFBUSxVQUFXSixJQUlwQyxnQkFDRSxNQUFNSyxFQUFlQyxLQUFLQyxNQUFNTixhQUFhQyxRQUFRLFlBQy9DTSxFQUFlRixLQUFLQyxNQUFNTixhQUFhQyxRQUFRLGlCQUNyREQsYUFBYUcsUUFBUSxlQUFnQkUsS0FBS0csVUFBVUQsSUFDcEQsTUFBTUUsRUFBWUMsR0FBWUEsRUFBUWIsS0FBT0MsS0FBS0QsR0FDNUNjLEVBQWVQ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YXNzIFRvRG8ge1xuICBjb25zdHJ1Y3Rvcih0aXRsZSwgZGVzY3JpcHRpb24sIGRhdGUsIHByaW9yaXR5LCBpZCkge1xuICAgIHRoaXMudGl0bGUgPSB0aXRsZTtcbiAgICB0aGlzLmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XG4gICAgdGhpcy5kYXRlID0gZGF0ZTtcbiAgICB0aGlzLnByaW9yaXR5ID0gcHJpb3JpdHk7XG4gICAgaWYgKGlkKSB7XG4gICAgICB0aGlzLmlkID0gaWQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCBhY2MgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcImFjY1RvRG9cIik7XG4gICAgICBhY2MgPSBOdW1iZXIoYWNjKTtcbiAgICAgIGFjYyArPSAxO1xuICAgICAgdGhpcy5pZCA9IGFjYztcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiYWNjVG9Eb1wiLCBhY2MpO1xuICAgIH1cbiAgfVxuXG4gIHJlbW92ZUVsZW1lbnQoKSB7XG4gICAgY29uc3QgYXJyYXlEZWZhdWx0ID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcIkRlZmF1bHRcIikpO1xuICAgIGNvbnN0IGN1cnJlbnRBcnJheSA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJjdXJyZW50QXJyYXlcIikpO1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiY3VycmVudEFycmF5XCIsIEpTT04uc3RyaW5naWZ5KGN1cnJlbnRBcnJheSkpO1xuICAgIGNvbnN0IGZpbmRCeUlkID0gKGVsZW1lbnQpID0+IGVsZW1lbnQuaWQgPT09IHRoaXMuaWQ7XG4gICAgY29uc3QgaW5kZXhEZWZhdWx0ID0gYXJyYXlEZWZhdWx0LmZpbmRJbmRleChmaW5kQnlJZCk7XG4gICAgY29uc3QgaW5kZXhDQSA9IGN1cnJlbnRBcnJheS5maW5kSW5kZXgoZmluZEJ5SWQpO1xuICAgIGFycmF5RGVmYXVsdC5zcGxpY2UoaW5kZXhEZWZhdWx0LCAxKTtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcIkRlZmF1bHRcIiwgSlNPTi5zdHJpbmdpZnkoYXJyYXlEZWZhdWx0KSk7XG5cbiAgICBjdXJyZW50QXJyYXkuc3BsaWNlKGluZGV4Q0EsIDEpO1xuICAgIGNvbnN0IGN1cnJlbnRQcm9qZWN0ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJjdXJyZW50UHJvamVjdFwiKTtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShjdXJyZW50UHJvamVjdCwgSlNPTi5zdHJpbmdpZnkoY3VycmVudEFycmF5KSk7XG5cbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcImN1cnJlbnRBcnJheVwiLCBKU09OLnN0cmluZ2lmeShjdXJyZW50QXJyYXkpKTtcblxuICAgIGNvbnN0IGNhcmRUb1JlbW92ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGAke3RoaXMuaWR9YCk7XG4gICAgY29uc3Qgc2hvd1RvRG9MaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0b0RvTGlzdFNob3dcIik7XG4gICAgc2hvd1RvRG9MaXN0LnJlbW92ZUNoaWxkKGNhcmRUb1JlbW92ZSk7XG4gIH1cblxuICBlZGl0RWxlbWVudCgpIHtcbiAgICBsZXQgZmF0aGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYCR7dGhpcy5pZH1gKTtcblxuICAgIGNvbnN0IGZvcm1FZGl0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImZvcm1cIik7XG4gICAgZmF0aGVyLmFwcGVuZENoaWxkKGZvcm1FZGl0KTtcblxuICAgIGNvbnN0IGlucHV0VGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG4gICAgaW5wdXRUaXRsZS5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwidGV4dFwiKTtcbiAgICBpbnB1dFRpdGxlLnNldEF0dHJpYnV0ZShcImlkXCIsIGBpbnB1dFRpdGxlRWRpdCR7dGhpcy5pZH1gKTtcbiAgICBjb25zdCBpbnB1dERlc2NyaXB0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICAgIGlucHV0RGVzY3JpcHRpb24uc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcInRleHRcIik7XG4gICAgaW5wdXREZXNjcmlwdGlvbi5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBgaW5wdXREZXNjcmlwdGlvbkVkaXQke3RoaXMuaWR9YCk7XG4gICAgY29uc3QgaW5wdXREYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICAgIGlucHV0RGF0ZS5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwiZGF0ZVwiKTtcbiAgICBpbnB1dERhdGUuc2V0QXR0cmlidXRlKFwiaWRcIiwgYGlucHV0RGF0ZUVkaXQke3RoaXMuaWR9YCk7XG5cbiAgICBjb25zdCBpbnB1dFByaW9yaXR5TkxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBpbnB1dFByaW9yaXR5TkxhYmVsLnNldEF0dHJpYnV0ZShcImlkXCIsIGBpbnB1dFByaW9yaXR5RWRpdCR7dGhpcy5pZH1gKTtcbiAgICBsZXQgbGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIik7XG4gICAgbGFiZWwuaW5uZXJIVE1MID0gXCJQcmlvcml0eTpcIjtcbiAgICBsYWJlbC5zZXRBdHRyaWJ1dGUoXCJmb3JcIiwgXCJwcmlvcml0eVwiKTtcbiAgICBpbnB1dFByaW9yaXR5TkxhYmVsLmFwcGVuZENoaWxkKGxhYmVsKTtcbiAgICBsZXQgcHJpb3JpdHk7XG4gICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IDM7IGluZGV4ICs9IDEpIHtcbiAgICAgIGxldCBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcblxuICAgICAgc3dpdGNoIChpbmRleCkge1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgcHJpb3JpdHkgPSBcImxvd1wiO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgICBwcmlvcml0eSA9IFwibWVkaXVtXCI7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICBwcmlvcml0eSA9IFwidXJnZW50XCI7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgbGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIik7XG4gICAgICBsYWJlbC5zZXRBdHRyaWJ1dGUoXCJmb3JcIiwgcHJpb3JpdHkpO1xuICAgICAgbGFiZWwuaW5uZXJIVE1MID0gcHJpb3JpdHk7XG4gICAgICBpbnB1dFByaW9yaXR5TkxhYmVsLmFwcGVuZENoaWxkKGxhYmVsKTtcbiAgICAgIGlucHV0LnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJyYWRpb1wiKTtcbiAgICAgIGlucHV0LnNldEF0dHJpYnV0ZShcIm5hbWVcIiwgcHJpb3JpdHkpO1xuICAgICAgaW5wdXQuc2V0QXR0cmlidXRlKFwiaWRcIiwgYCR7cHJpb3JpdHl9JHt0aGlzLmlkfWApO1xuICAgICAgaW5wdXRQcmlvcml0eU5MYWJlbC5hcHBlbmRDaGlsZChpbnB1dCk7XG4gICAgfVxuXG4gICAgZm9ybUVkaXQuYXBwZW5kQ2hpbGQoaW5wdXRUaXRsZSk7XG4gICAgZm9ybUVkaXQuYXBwZW5kQ2hpbGQoaW5wdXREZXNjcmlwdGlvbik7XG4gICAgZm9ybUVkaXQuYXBwZW5kQ2hpbGQoaW5wdXREYXRlKTtcbiAgICBmb3JtRWRpdC5hcHBlbmRDaGlsZChpbnB1dFByaW9yaXR5TkxhYmVsKTtcblxuICAgIGNvbnN0IGVkaXRLZXlwYWQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICAgIGVkaXRLZXlwYWQuc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcInN1Ym1pdFwiKTtcbiAgICBlZGl0S2V5cGFkLnNldEF0dHJpYnV0ZShcImlkXCIsIFwiZWRpdEJ1dHRvbkFjY2VwdFwiKTtcbiAgICBlZGl0S2V5cGFkLmlubmVySFRNTCA9IFwiQWNjZXB0XCI7XG5cbiAgICBmb3JtRWRpdC5hcHBlbmRDaGlsZChlZGl0S2V5cGFkKTtcblxuICAgIGVkaXRLZXlwYWQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIGxldCB0aXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBpbnB1dFRpdGxlRWRpdCR7dGhpcy5pZH1gKTtcbiAgICAgIGxldCBkZXNjcmlwdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFxuICAgICAgICBgaW5wdXREZXNjcmlwdGlvbkVkaXQke3RoaXMuaWR9YFxuICAgICAgKTtcbiAgICAgIGxldCBkYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYGlucHV0RGF0ZUVkaXQke3RoaXMuaWR9YCk7XG4gICAgICBjb25zdCBwcmlvcml0eUxvdyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBsb3cke3RoaXMuaWR9YCk7XG4gICAgICBjb25zdCBwcmlvcml0eU1lZGl1bSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBtZWRpdW0ke3RoaXMuaWR9YCk7XG4gICAgICBjb25zdCBwcmlvcml0eVVyZ2VudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGB1cmdlbnQke3RoaXMuaWR9YCk7XG4gICAgICBwcmlvcml0eSA9IG51bGw7XG4gICAgICBpZiAocHJpb3JpdHlMb3cuY2hlY2tlZCkge1xuICAgICAgICBwcmlvcml0eSA9IHByaW9yaXR5TG93Lm5hbWU7XG4gICAgICB9IGVsc2UgaWYgKHByaW9yaXR5TWVkaXVtLmNoZWNrZWQpIHtcbiAgICAgICAgcHJpb3JpdHkgPSBwcmlvcml0eU1lZGl1bS5uYW1lO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcHJpb3JpdHkgPSBwcmlvcml0eVVyZ2VudC5uYW1lO1xuICAgICAgfVxuXG4gICAgICBsZXQgY2FyZCA9IG5ldyBUb0RvKFxuICAgICAgICB0aXRsZS52YWx1ZSxcbiAgICAgICAgZGVzY3JpcHRpb24udmFsdWUsXG4gICAgICAgIGRhdGUudmFsdWUsXG4gICAgICAgIHByaW9yaXR5LFxuICAgICAgICB0aGlzLmlkXG4gICAgICApO1xuXG4gICAgICBsZXQgZGVmYXVsdEFycmF5ID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcIkRlZmF1bHRcIikpO1xuICAgICAgbGV0IGluZGV4ID0gZGVmYXVsdEFycmF5LmZpbmRJbmRleCgoZWxlbWVudCkgPT4gZWxlbWVudC5pZCA9PSB0aGlzLmlkKTtcbiAgICAgIGRlZmF1bHRBcnJheVtpbmRleF0gPSBjYXJkO1xuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJEZWZhdWx0XCIsIEpTT04uc3RyaW5naWZ5KGRlZmF1bHRBcnJheSkpO1xuXG4gICAgICBsZXQgY3VycmVudFByb2plY3QgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcImN1cnJlbnRQcm9qZWN0XCIpO1xuICAgICAgbGV0IHByb2plY3RBcnJheSA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oYCR7Y3VycmVudFByb2plY3R9YCkpO1xuICAgICAgaW5kZXggPSBwcm9qZWN0QXJyYXkuZmluZEluZGV4KChlbGVtZW50KSA9PiBlbGVtZW50LmlkID09IHRoaXMuaWQpO1xuICAgICAgcHJvamVjdEFycmF5W2luZGV4XSA9IGNhcmQ7XG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShgJHtjdXJyZW50UHJvamVjdH1gLCBKU09OLnN0cmluZ2lmeShwcm9qZWN0QXJyYXkpKTtcblxuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJjdXJyZW50QXJyYXlcIiwgSlNPTi5zdHJpbmdpZnkocHJvamVjdEFycmF5KSk7XG5cbiAgICAgIC8vIGNvbnNvbGUubG9nKGRlc2NyaXB0aW9uLnZhbHVlKTtcbiAgICAgIC8vIGNvbnN0IG9sZFRpdGxlID0gZmF0aGVyLmNoaWxkTm9kZXNbMF07XG5cbiAgICAgIC8vIGNvbnNvbGUubG9nKG9sZERlc2NyaXB0aW9uKTtcblxuICAgICAgLy8gb2xkRGVzY3JpcHRpb24uaW5uZXJIVE1MID0gZGVzY3JpcHRpb24udmFsdWU7XG5cbiAgICAgIC8vIGNvbnN0IG9sZERhdGUgPSBmYXRoZXIuY2hpbGROb2Rlc1sxXS5jaGlsZE5vZGVzWzBdO1xuICAgICAgLy8gY29uc3Qgb2xkUHJpb3JpdHkgPSBmYXRoZXIuY2hpbGROb2Rlc1sxXS5jaGlsZE5vZGVzWzBdO1xuXG4gICAgICAvLyBvbGRUaXRsZS50ZXh0Q29udGVudCA9IHRpdGxlLnZhbHVlO1xuICAgICAgLy8gb2xkRGF0ZS50ZXh0Q29udGVudCA9IGRhdGUudmFsdWU7XG4gICAgICAvLyBvbGRQcmlvcml0eS50ZXh0Q29udGVudCA9IHByaW9yaXR5LnZhbHVlO1xuXG4gICAgICAvLyBsZXQgY29sb3IgPSBudWxsO1xuICAgICAgLy8gaWYgKG9sZFByaW9yaXR5LnRleHRDb250ZW50ID09PSBcImxvd1wiKSB7XG4gICAgICAvLyAgIGNvbG9yID0gXCJwcmltYXJ5XCI7XG4gICAgICAvLyB9IGVsc2UgaWYgKG9sZFByaW9yaXR5LnRleHRDb250ZW50ID09PSBcIm1lZGl1bVwiKSB7XG4gICAgICAvLyAgIGNvbG9yID0gXCJ3YXJuaW5nXCI7XG4gICAgICAvLyB9IGVsc2Uge1xuICAgICAgLy8gICBjb2xvciA9IFwiZGFuZ2VyXCI7XG4gICAgICAvLyB9XG4gICAgICAvLyBmYXRoZXIuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgYGNhcmQgdGV4dC13aGl0ZSBiZy0ke2NvbG9yfWApO1xuXG4gICAgICAvLyBmYXRoZXIucmVtb3ZlQ2hpbGQoZm9ybUVkaXQpO1xuICAgICAgLy8gd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpbnQoKSB7XG4gICAgY29uc3QgY2FyZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgbGV0IGNvbG9yID0gbnVsbDtcbiAgICBpZiAodGhpcy5wcmlvcml0eSA9PT0gXCJsb3dcIikge1xuICAgICAgY29sb3IgPSBcInByaW1hcnlcIjtcbiAgICB9IGVsc2UgaWYgKHRoaXMucHJpb3JpdHkgPT09IFwibWVkaXVtXCIpIHtcbiAgICAgIGNvbG9yID0gXCJ3YXJuaW5nXCI7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbG9yID0gXCJkYW5nZXJcIjtcbiAgICB9XG4gICAgY2FyZC5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBgY2FyZCB0ZXh0LXdoaXRlIGJnLSR7Y29sb3J9YCk7XG4gICAgY2FyZC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBgJHt0aGlzLmlkfWApO1xuXG4gICAgY29uc3QgdGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIHRpdGxlLnNldEF0dHJpYnV0ZShcImlkXCIsIFwiY2FyZFRpdGxlXCIpO1xuICAgIHRpdGxlLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwiY2FyZC1oZWFkZXIgdGV4dC13aGl0ZVwiKTtcbiAgICB0aXRsZS5pbm5lckhUTUwgPSB0aGlzLnRpdGxlO1xuICAgIGNhcmQuYXBwZW5kQ2hpbGQodGl0bGUpO1xuXG4gICAgY29uc3QgYm9keSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgYm9keS5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcImNhcmQtYm9keSB0ZXh0LXdoaXRlXCIpO1xuICAgIGJvZHkuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJib2R5XCIpO1xuICAgIGNhcmQuYXBwZW5kQ2hpbGQoYm9keSk7XG5cbiAgICBjb25zdCBib2R5VGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaDVcIik7XG4gICAgYm9keVRpdGxlLnNldEF0dHJpYnV0ZShcImlkXCIsIGBkZXNjcmlwdGlvbiR7dGhpcy5pZH1gKTtcbiAgICBib2R5VGl0bGUuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJjYXJkLXRpdGxlIHRleHQtd2hpdGVcIik7XG4gICAgYm9keVRpdGxlLmlubmVySFRNTCA9IHRoaXMuZGVzY3JpcHRpb247XG4gICAgYm9keS5hcHBlbmRDaGlsZChib2R5VGl0bGUpO1xuXG4gICAgbGV0IGJvZHlQID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XG4gICAgYm9keVAuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJjYXJkLXRleHQgdGV4dC13aGl0ZVwiKTtcbiAgICBib2R5UC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcImRhdGVUb0RvXCIpO1xuICAgIGJvZHlQLmlubmVySFRNTCA9IHRoaXMuZGF0ZTtcbiAgICBib2R5LmFwcGVuZENoaWxkKGJvZHlQKTtcblxuICAgIGJvZHlQID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XG4gICAgYm9keVAuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJjYXJkLXRleHQgdGV4dC13aGl0ZVwiKTtcbiAgICBib2R5UC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcInByaW9yaXR5VG9Eb1wiKTtcbiAgICBib2R5UC5pbm5lckhUTUwgPSB0aGlzLnByaW9yaXR5O1xuICAgIGJvZHkuYXBwZW5kQ2hpbGQoYm9keVApO1xuXG4gICAgY29uc3Qga2V5cGFkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBrZXlwYWQuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJyb3cgY29udGFpbmVyXCIpO1xuICAgIGNhcmQuYXBwZW5kQ2hpbGQoa2V5cGFkKTtcblxuICAgIGNvbnN0IGRlbEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgZGVsQnV0dG9uLnNldEF0dHJpYnV0ZShcImlkXCIsIFwiZGVsZXRlQnV0dG9uXCIpO1xuICAgIGRlbEJ1dHRvbi5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcImNvbC0yXCIpO1xuICAgIGRlbEJ1dHRvbi5pbm5lckhUTUwgPSBcIkRlbGV0ZVwiO1xuICAgIGtleXBhZC5hcHBlbmRDaGlsZChkZWxCdXR0b24pO1xuICAgIGRlbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5yZW1vdmVFbGVtZW50KCkpO1xuXG4gICAgY29uc3QgZWRpdEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgZWRpdEJ1dHRvbi5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcImVkaXRCdXR0b25cIik7XG4gICAgZWRpdEJ1dHRvbi5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcImNvbC0yXCIpO1xuICAgIGVkaXRCdXR0b24uaW5uZXJIVE1MID0gXCJFZGl0XCI7XG4gICAga2V5cGFkLmFwcGVuZENoaWxkKGVkaXRCdXR0b24pO1xuICAgIGVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuZWRpdEVsZW1lbnQoKSk7XG5cbiAgICByZXR1cm4gY2FyZDtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBUb0RvO1xuIiwiaW1wb3J0IGFkZEJ1dHRvbkNvbXBvbmVudCBmcm9tICcuL2FkZEJ1dHRvbic7XG5pbXBvcnQgVG9EbyBmcm9tICcuL3RvRG8nO1xuXG5sZXQgcHJvamVjdHMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdwcm9qZWN0c0FycmF5JykpO1xucHJvamVjdHMgPSAhcHJvamVjdHMgPyBbJ0RlZmF1bHQnXSA6IHByb2plY3RzO1xubG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Byb2plY3RzQXJyYXknLCBKU09OLnN0cmluZ2lmeShwcm9qZWN0cykpO1xuXG5sZXQgY3VycmVudFAgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY3VycmVudFByb2plY3QnKTtcbmN1cnJlbnRQID8/PSBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnY3VycmVudFByb2plY3QnLCAnRGVmYXVsdCcpO1xuXG5sZXQgYXJyYXlDdXJyZW50ID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShgJHtjdXJyZW50UH1gKSk7XG5pZiAoYXJyYXlDdXJyZW50ID09PSBudWxsIHx8IGFycmF5Q3VycmVudCA9PT0gW10pIHtcbiAgYXJyYXlDdXJyZW50ID0gW107XG59XG5cbmxvY2FsU3RvcmFnZS5zZXRJdGVtKCdjdXJyZW50QXJyYXknLCBKU09OLnN0cmluZ2lmeShhcnJheUN1cnJlbnQpKTtcblxuY29uc3QgcHJvamVjdExpc3RDb21wb25lbnQgPSAoKSA9PiB7XG4gIGNvbnN0IHByb2plY3RMaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2plY3RMaXN0Jyk7XG5cbiAgY29uc3QgZGl2UHJvamVjdHNCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgZGl2UHJvamVjdHNCdXR0b24uc2V0QXR0cmlidXRlKCdjbGFzcycsICdyb3cnKTtcblxuICBjb25zdCB0aXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gxJyk7XG4gIHRpdGxlLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnY29sLTgnKTtcbiAgdGl0bGUuaW5uZXJIVE1MID0gJ1Byb2plY3RzJztcbiAgZGl2UHJvamVjdHNCdXR0b24uYXBwZW5kQ2hpbGQodGl0bGUpO1xuICBjb25zdCBmb3JtID0gYWRkQnV0dG9uQ29tcG9uZW50KCk7XG4gIGRpdlByb2plY3RzQnV0dG9uLmFwcGVuZENoaWxkKGZvcm0pO1xuXG4gIGNvbnN0IHVMaXN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndWwnKTtcblxuICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgcHJvamVjdHMubGVuZ3RoOyBpbmRleCArPSAxKSB7XG4gICAgY29uc3QgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuICAgIGNvbnN0IGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgIGJ1dHRvbi5pbm5lckhUTUwgPSBwcm9qZWN0c1tpbmRleF07XG4gICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdjdXJyZW50UHJvamVjdCcsIGUudGFyZ2V0LmlubmVySFRNTCk7XG4gICAgICBjb25zdCB0YXJnZXRWYWx1ZSA9IGUudGFyZ2V0LmlubmVySFRNTDtcbiAgICAgIGNvbnN0IGdldFZhbHVlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0odGFyZ2V0VmFsdWUpO1xuICAgICAgY29uc3QgYXJyYXlDdXJyZW50ID0gSlNPTi5wYXJzZShgJHtnZXRWYWx1ZX1gKTtcblxuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2N1cnJlbnRBcnJheScsIEpTT04uc3RyaW5naWZ5KGFycmF5Q3VycmVudCkpO1xuICAgICAgY29uc3QgbGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b0RvTGlzdFNob3cnKTtcblxuICAgICAgbGlzdC5pbm5lckhUTUwgPSBudWxsO1xuICAgICAgY29uc3QgY3VycmVudFAgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY3VycmVudFByb2plY3QnKTtcbiAgICAgIGNvbnN0IGFycmF5QXV4ID0gY3VycmVudFAgPT09ICdEZWZhdWx0J1xuICAgICAgICA/IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ0RlZmF1bHQnKSlcbiAgICAgICAgOiBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjdXJyZW50QXJyYXknKSk7XG5cbiAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBhcnJheUF1eC5sZW5ndGg7IGluZGV4ICs9IDEpIHtcbiAgICAgICAgY29uc3QgY2FyZCA9IG5ldyBUb0RvKFxuICAgICAgICAgIGFycmF5QXV4W2luZGV4XS50aXRsZSxcbiAgICAgICAgICBhcnJheUF1eFtpbmRleF0uZGVzY3JpcHRpb24sXG4gICAgICAgICAgYXJyYXlBdXhbaW5kZXhdLmRhdGUsXG4gICAgICAgICAgYXJyYXlBdXhbaW5kZXhdLnByaW9yaXR5LFxuICAgICAgICAgIGFycmF5QXV4W2luZGV4XS5pZCxcbiAgICAgICAgKTtcblxuICAgICAgICBpZiAoY2FyZC5pZCkge1xuICAgICAgICAgIGNvbnN0IHJlbmRlckNhcmQgPSBjYXJkLnByaW50KCk7XG4gICAgICAgICAgbGlzdC5hcHBlbmRDaGlsZChyZW5kZXJDYXJkKTtcbiAgICAgICAgICBjb25zdCB0b0xpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndG9Eb0xpc3QnKTtcbiAgICAgICAgICB0b0xpc3QuYXBwZW5kQ2hpbGQobGlzdCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGxpLmFwcGVuZENoaWxkKGJ1dHRvbik7XG4gICAgdUxpc3QuYXBwZW5kQ2hpbGQobGkpO1xuXG4gICAgYXJyYXlDdXJyZW50ID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShjdXJyZW50UCkpO1xuICB9XG5cbiAgcHJvamVjdExpc3QuYXBwZW5kQ2hpbGQoZGl2UHJvamVjdHNCdXR0b24pO1xuXG4gIHByb2plY3RMaXN0LmFwcGVuZENoaWxkKHVMaXN0KTtcblxuICBjb25zdCBzdWJtaXRCdXR0b24gPSBmb3JtLmNoaWxkcmVuWzFdLmNoaWxkcmVuWzBdO1xuICBzdWJtaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgcHJvamVjdHMucHVzaChmb3JtLmNoaWxkcmVuWzBdLnZhbHVlKTtcbiAgICBjb25zdCBsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XG4gICAgY29uc3QgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgYnV0dG9uLmlubmVySFRNTCA9IGZvcm0uY2hpbGRyZW5bMF0udmFsdWU7XG4gICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdjdXJyZW50UHJvamVjdCcsIGUudGFyZ2V0LmlubmVySFRNTCk7XG4gICAgICBjb25zdCBpdGVtID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2N1cnJlbnRQcm9qZWN0Jyk7XG4gICAgICBhcnJheUN1cnJlbnQgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKGl0ZW0pKTtcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdjdXJyZW50QXJyYXknLCBKU09OLnN0cmluZ2lmeShhcnJheUN1cnJlbnQpKTtcbiAgICAgIGNvbnN0IHRvRG9MID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RvRG9MaXN0U2hvdycpO1xuICAgICAgdG9Eb0wuaW5uZXJIVE1MID0gbnVsbDtcbiAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBhcnJheUN1cnJlbnQubGVuZ3RoOyBpbmRleCArPSAxKSB7XG4gICAgICAgIGNvbnN0IGNhcmQgPSBuZXcgVG9EbyhcbiAgICAgICAgICBhcnJheUN1cnJlbnRbaW5kZXhdLnRpdGxlLFxuICAgICAgICAgIGFycmF5Q3VycmVudFtpbmRleF0uZGVzY3JpcHRpb24sXG4gICAgICAgICAgYXJyYXlDdXJyZW50W2luZGV4XS5kYXRlLFxuICAgICAgICAgIGFycmF5Q3VycmVudFtpbmRleF0ucHJpb3JpdHksXG4gICAgICAgICAgYXJyYXlDdXJyZW50W2luZGV4XS5pZCxcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKGNhcmQuaWQpIHtcbiAgICAgICAgICBjb25zdCByZW5kZXJDYXJkID0gY2FyZC5wcmludCgpO1xuICAgICAgICAgIGNvbnN0IHRvRG9MaXN0U2hvdyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b0RvTGlzdFNob3cnKTtcbiAgICAgICAgICB0b0RvTGlzdFNob3cuYXBwZW5kQ2hpbGQocmVuZGVyQ2FyZCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnY3VycmVudFByb2plY3QnLCBmb3JtLmNoaWxkcmVuWzBdLnZhbHVlKTtcbiAgICBjb25zdCBrZXkgPSBmb3JtLmNoaWxkcmVuWzBdLnZhbHVlO1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGAke2tleX1gLCBKU09OLnN0cmluZ2lmeShbXSkpO1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdjdXJyZW50QXJyYXknLCBKU09OLnN0cmluZ2lmeShbXSkpO1xuICAgIGNvbnN0IHRvRG9MaXN0U2hvdyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b0RvTGlzdFNob3cnKTtcbiAgICB0b0RvTGlzdFNob3cuaW5uZXJIVE1MID0gbnVsbDtcbiAgICBsaS5hcHBlbmRDaGlsZChidXR0b24pO1xuICAgIHVMaXN0LmFwcGVuZENoaWxkKGxpKTtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgncHJvamVjdHNBcnJheScsIEpTT04uc3RyaW5naWZ5KHByb2plY3RzKSk7XG4gIH0pO1xuXG4gIHJldHVybiBwcm9qZWN0TGlzdDtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHByb2plY3RMaXN0Q29tcG9uZW50O1xuIiwiaW1wb3J0IHByb2plY3RMaXN0Q29tcG9uZW50IGZyb20gXCIuL3Byb2plY3RzXCI7XG5pbXBvcnQgdG9Eb0NvbGxlY3Rpb24gZnJvbSBcIi4vdG9Eb0NvbGxlY3Rpb25cIjtcbmltcG9ydCBUb0RvIGZyb20gXCIuL3RvRG9cIjtcblxubGV0IGFsbFRvRG9zID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcImFsbFRvRG9zQXJyYXlcIikpO1xuYWxsVG9Eb3MgPz89IFtdO1xubG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJhbGxUb0Rvc0FycmF5XCIsIEpTT04uc3RyaW5naWZ5KGFsbFRvRG9zKSk7XG5cbmNvbnN0IGN1cnJlbnRBY2MgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcImFjY1RvRG9cIik7XG5pZiAoY3VycmVudEFjYyA9PSBudWxsKSB7XG4gIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiYWNjVG9Eb1wiLCAwKTtcbn1cbmxldCBjdXJyZW50UHJvamVjdCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiY3VycmVudFByb2plY3RcIik7XG5jdXJyZW50UHJvamVjdCA/Pz0gbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJjdXJyZW50UHJvamVjdFwiLCBcIkRlZmF1bHRcIik7XG5cbmNvbnN0IGRlZlByb2plY3QgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiRGVmYXVsdFwiKSk7XG5pZiAoZGVmUHJvamVjdCA9PSBudWxsKSB7XG4gIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiRGVmYXVsdFwiLCBKU09OLnN0cmluZ2lmeShbXSkpO1xufVxuXG5sZXQgY3VycmVudEFycmF5ID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShgJHtjdXJyZW50UHJvamVjdH1gKSk7XG5pZiAoY3VycmVudEFycmF5ID09PSBudWxsIHx8IGN1cnJlbnRBcnJheSA9PT0gW10pIHtcbiAgY3VycmVudEFycmF5ID0gW107XG59XG5cbmxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiY3VycmVudEFycmF5XCIsIEpTT04uc3RyaW5naWZ5KGN1cnJlbnRBcnJheSkpO1xuXG5jb25zdCBjb250ZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb250ZW50XCIpO1xuXG5jb25zdCBwdExpc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXG5wdExpc3Quc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJjb2wtNFwiKTtcbnB0TGlzdC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcInByb2plY3RMaXN0XCIpO1xuY29udGVudC5hcHBlbmRDaGlsZChwdExpc3QpO1xuXG5jb25zdCB0b0xpc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xudG9MaXN0LnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwiY29sLThcIik7XG50b0xpc3Quc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJ0b0RvTGlzdFwiKTtcbmNvbnRlbnQuYXBwZW5kQ2hpbGQodG9MaXN0KTtcblxuY29uc3QgcHJvamVjdExpc3QgPSBwcm9qZWN0TGlzdENvbXBvbmVudCgpO1xuXG5jb250ZW50LmFwcGVuZENoaWxkKHByb2plY3RMaXN0KTtcblxuY29uc3QgdG9Eb0xpc3QgPSB0b0RvQ29sbGVjdGlvbigpO1xuY29udGVudC5hcHBlbmRDaGlsZCh0b0RvTGlzdCk7XG5cbmNvbnN0IGdldFRpdGxlID0gKCkgPT4ge1xuICBjb25zdCB0aXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGl0bGVcIik7XG4gIHJldHVybiB0aXRsZS52YWx1ZTtcbn07XG5cbmNvbnN0IGdldERlc2NyaXB0aW9uID0gKCkgPT4ge1xuICBjb25zdCBkZXNjcmlwdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGVzY3JpcHRpb25cIik7XG4gIHJldHVybiBkZXNjcmlwdGlvbi52YWx1ZTtcbn07XG5cbmNvbnN0IGdldERhdGUgPSAoKSA9PiB7XG4gIGNvbnN0IGRhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImR1ZURhdGVcIik7XG4gIHJldHVybiBkYXRlLnZhbHVlO1xufTtcblxuY29uc3QgZ2V0UHJpb3JpdHkgPSAoKSA9PiB7XG4gIGNvbnN0IHByaW9yaXR5TG93ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJsb3dcIik7XG4gIGNvbnN0IHByaW9yaXR5TWVkaXVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtZWRpdW1cIik7XG4gIGNvbnN0IHByaW9yaXR5VXJnZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ1cmdlbnRcIik7XG4gIGxldCBwcmlvcml0eSA9IG51bGw7XG4gIGlmIChwcmlvcml0eUxvdy5jaGVja2VkKSB7XG4gICAgcHJpb3JpdHkgPSBwcmlvcml0eUxvdy5uYW1lO1xuICB9IGVsc2UgaWYgKHByaW9yaXR5TWVkaXVtLmNoZWNrZWQpIHtcbiAgICBwcmlvcml0eSA9IHByaW9yaXR5TWVkaXVtLm5hbWU7XG4gIH0gZWxzZSB7XG4gICAgcHJpb3JpdHkgPSBwcmlvcml0eVVyZ2VudC5uYW1lO1xuICB9XG4gIHJldHVybiBwcmlvcml0eTtcbn07XG5cbmNvbnN0IG9uU3VibWl0Rm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3VibWl0QnV0dG9uXCIpO1xub25TdWJtaXRGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGNvbnN0IHRpdGxlID0gZ2V0VGl0bGUoKTtcbiAgY29uc3QgZGVzYyA9IGdldERlc2NyaXB0aW9uKCk7XG4gIGNvbnN0IGRhdGUgPSBnZXREYXRlKCk7XG4gIGNvbnN0IHByaW9yID0gZ2V0UHJpb3JpdHkoKTtcblxuICBjb25zdCB0b0RvID0gbmV3IFRvRG8odGl0bGUsIGRlc2MsIGRhdGUsIHByaW9yKTtcbiAgY29uc3QgdG9Eb0xpc3RTaG93ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0b0RvTGlzdFNob3dcIik7XG4gIHRvRG9MaXN0U2hvdy5hcHBlbmRDaGlsZCh0b0RvLnByaW50KCkpO1xuICBhbGxUb0Rvcy5wdXNoKHRvRG8pO1xuICBjdXJyZW50QXJyYXkgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiY3VycmVudEFycmF5XCIpKTtcbiAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJEZWZhdWx0XCIsIEpTT04uc3RyaW5naWZ5KGFsbFRvRG9zKSk7XG4gIGN1cnJlbnRBcnJheS5wdXNoKHRvRG8pO1xuICBjdXJyZW50UHJvamVjdCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiY3VycmVudFByb2plY3RcIik7XG4gIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiY3VycmVudEFycmF5XCIsIEpTT04uc3RyaW5naWZ5KGN1cnJlbnRBcnJheSkpO1xuICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShgJHtjdXJyZW50UHJvamVjdH1gLCBKU09OLnN0cmluZ2lmeShjdXJyZW50QXJyYXkpKTtcbiAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJhbGxUb0Rvc0FycmF5XCIsIEpTT04uc3RyaW5naWZ5KGFsbFRvRG9zKSk7XG4gIHRvRG9MaXN0LmFwcGVuZENoaWxkKHRvRG9MaXN0U2hvdyk7XG59KTtcbiIsImNvbnN0IGFkZEJ1dHRvbkNvbXBvbmVudCA9ICgpID0+IHtcbiAgY29uc3QgZm9ybSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2Zvcm0nKTtcbiAgZm9ybS5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2lkRm9ybScpO1xuICBjb25zdCBpbnB1dE5hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICBpbnB1dE5hbWUuc2V0QXR0cmlidXRlKCd0eXBlJywgJ3RleHQnKTtcbiAgaW5wdXROYW1lLnNldEF0dHJpYnV0ZSgncGxhY2Vob2xkZXInLCAnUHJvamVjdCBuYW1lJyk7XG4gIGlucHV0TmFtZS5zZXRBdHRyaWJ1dGUoJ2lkJywgJ25hbWVGaWVsZCcpO1xuICBmb3JtLmFwcGVuZENoaWxkKGlucHV0TmFtZSk7XG4gIGNvbnN0IHNwYW5BZGRCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gIHNwYW5BZGRCdXR0b24uc2V0QXR0cmlidXRlKCdjbGFzcycsICdjb2wtNCcpO1xuICBjb25zdCBhZGRCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgYWRkQnV0dG9uLnNldEF0dHJpYnV0ZSgndHlwZScsICdzdWJtaXQnKTtcbiAgYWRkQnV0dG9uLnNldEF0dHJpYnV0ZSgnaWQnLCAnYnV0dG9uU3VibWl0Jyk7XG4gIGFkZEJ1dHRvbi5pbm5lckhUTUwgPSAnQWRkIHByb2plY3QnO1xuXG4gIHNwYW5BZGRCdXR0b24uYXBwZW5kQ2hpbGQoYWRkQnV0dG9uKTtcbiAgZm9ybS5hcHBlbmRDaGlsZChzcGFuQWRkQnV0dG9uKTtcblxuICByZXR1cm4gZm9ybTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGFkZEJ1dHRvbkNvbXBvbmVudDtcbiIsImltcG9ydCBUb0RvIGZyb20gJy4vdG9Ebyc7XG5cbmNvbnN0IGZvcm0gPSAoKSA9PiB7XG4gIGNvbnN0IGZvcm0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdmb3JtJyk7XG4gIGNvbnN0IGlucHV0VGl0bGVOTGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgZm9ybS5hcHBlbmRDaGlsZChpbnB1dFRpdGxlTkxhYmVsKTtcbiAgbGV0IGxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFiZWwnKTtcbiAgbGFiZWwuc2V0QXR0cmlidXRlKCdmb3InLCAndGl0bGUnKTtcbiAgbGFiZWwuaW5uZXJIVE1MID0gJ1RpdGxlOic7XG4gIGlucHV0VGl0bGVOTGFiZWwuYXBwZW5kQ2hpbGQobGFiZWwpO1xuXG4gIGxldCBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gIGlucHV0LnNldEF0dHJpYnV0ZSgndHlwZScsICd0ZXh0Jyk7XG4gIGlucHV0LnNldEF0dHJpYnV0ZSgnbmFtZScsICd0aXRsZScpO1xuICBpbnB1dC5zZXRBdHRyaWJ1dGUoJ2lkJywgJ3RpdGxlJyk7XG4gIGlucHV0VGl0bGVOTGFiZWwuYXBwZW5kQ2hpbGQoaW5wdXQpO1xuXG4gIGNvbnN0IGlucHV0RGVzY3JpcHRpb25OTGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgZm9ybS5hcHBlbmRDaGlsZChpbnB1dERlc2NyaXB0aW9uTkxhYmVsKTtcbiAgbGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpO1xuICBsYWJlbC5pbm5lckhUTUwgPSAnRGVzY3JpcHRpb246JztcbiAgbGFiZWwuc2V0QXR0cmlidXRlKCdmb3InLCAnZGVzY3JpcHRpb24nKTtcbiAgaW5wdXREZXNjcmlwdGlvbk5MYWJlbC5hcHBlbmRDaGlsZChsYWJlbCk7XG5cbiAgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICBpbnB1dC5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAndGV4dCcpO1xuICBpbnB1dC5zZXRBdHRyaWJ1dGUoJ25hbWUnLCAnZGVzY3JpcHRpb24nKTtcbiAgaW5wdXQuc2V0QXR0cmlidXRlKCdpZCcsICdkZXNjcmlwdGlvbicpO1xuICBpbnB1dERlc2NyaXB0aW9uTkxhYmVsLmFwcGVuZENoaWxkKGlucHV0KTtcblxuICBjb25zdCBpbnB1dER1ZURhdGVOTGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgZm9ybS5hcHBlbmRDaGlsZChpbnB1dER1ZURhdGVOTGFiZWwpO1xuICBsYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJyk7XG4gIGxhYmVsLmlubmVySFRNTCA9ICdEdWUgRGF0ZTogJztcbiAgbGFiZWwuc2V0QXR0cmlidXRlKCdmb3InLCAnZHVlRGF0ZScpO1xuICBpbnB1dER1ZURhdGVOTGFiZWwuYXBwZW5kQ2hpbGQobGFiZWwpO1xuXG4gIGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgaW5wdXQuc2V0QXR0cmlidXRlKCd0eXBlJywgJ2RhdGUnKTtcbiAgaW5wdXQuc2V0QXR0cmlidXRlKCduYW1lJywgJ2R1ZURhdGUnKTtcbiAgaW5wdXQuc2V0QXR0cmlidXRlKCdpZCcsICdkdWVEYXRlJyk7XG4gIGlucHV0RHVlRGF0ZU5MYWJlbC5hcHBlbmRDaGlsZChpbnB1dCk7XG5cbiAgY29uc3QgaW5wdXRQcmlvcml0eU5MYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICBmb3JtLmFwcGVuZENoaWxkKGlucHV0UHJpb3JpdHlOTGFiZWwpO1xuICBsYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJyk7XG4gIGxhYmVsLmlubmVySFRNTCA9ICdQcmlvcml0eTonO1xuICBsYWJlbC5zZXRBdHRyaWJ1dGUoJ2ZvcicsICdwcmlvcml0eScpO1xuICBpbnB1dFByaW9yaXR5TkxhYmVsLmFwcGVuZENoaWxkKGxhYmVsKTtcblxuICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgMzsgaW5kZXggKz0gMSkge1xuICAgIGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICBsZXQgcHJpb3JpdHk7XG4gICAgc3dpdGNoIChpbmRleCkge1xuICAgICAgY2FzZSAwOlxuICAgICAgICBwcmlvcml0eSA9ICdsb3cnO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAxOlxuICAgICAgICBwcmlvcml0eSA9ICdtZWRpdW0nO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMjpcbiAgICAgICAgcHJpb3JpdHkgPSAndXJnZW50JztcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIGxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFiZWwnKTtcbiAgICBsYWJlbC5zZXRBdHRyaWJ1dGUoJ2ZvcicsIHByaW9yaXR5KTtcbiAgICBsYWJlbC5pbm5lckhUTUwgPSBwcmlvcml0eTtcbiAgICBpbnB1dFByaW9yaXR5TkxhYmVsLmFwcGVuZENoaWxkKGxhYmVsKTtcbiAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAncmFkaW8nKTtcbiAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoJ25hbWUnLCBwcmlvcml0eSk7XG4gICAgaW5wdXQuc2V0QXR0cmlidXRlKCdpZCcsIHByaW9yaXR5KTtcbiAgICBpbnB1dFByaW9yaXR5TkxhYmVsLmFwcGVuZENoaWxkKGlucHV0KTtcbiAgfVxuXG4gIGNvbnN0IHN1bWJpdEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gIGZvcm0uYXBwZW5kQ2hpbGQoc3VtYml0QnV0dG9uKTtcbiAgc3VtYml0QnV0dG9uLnNldEF0dHJpYnV0ZSgndHlwZScsICdzdWJtaXQnKTtcbiAgc3VtYml0QnV0dG9uLnNldEF0dHJpYnV0ZSgnaWQnLCAnc3VibWl0QnV0dG9uJyk7XG4gIHJldHVybiBmb3JtO1xufTtcblxuY29uc3QgdG9Eb0NvbGxlY3Rpb24gPSAoKSA9PiB7XG4gIGNvbnN0IHRvRG9MaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RvRG9MaXN0Jyk7XG5cbiAgY29uc3QgdGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMicpO1xuICB0aXRsZS5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ3RleHQtY2VudGVyJyk7XG4gIHRpdGxlLmlubmVySFRNTCA9ICdMaXN0IG9mIFRvRG8nO1xuXG4gIHRvRG9MaXN0LmFwcGVuZENoaWxkKHRpdGxlKTtcblxuICBjb25zdCB0b0RvTGlzdEJsb2NrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIHRvRG9MaXN0QmxvY2suc2V0QXR0cmlidXRlKCdjbGFzcycsICd0b0RvTGlzdEJsb2NrJyk7XG5cbiAgdG9Eb0xpc3RCbG9jay5hcHBlbmRDaGlsZChmb3JtKCkpO1xuICB0b0RvTGlzdC5hcHBlbmRDaGlsZCh0b0RvTGlzdEJsb2NrKTtcblxuICBjb25zdCB0b0RvTGlzdFNob3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgdG9Eb0xpc3RTaG93LnNldEF0dHJpYnV0ZSgnaWQnLCAndG9Eb0xpc3RTaG93Jyk7XG4gIHRvRG9MaXN0LmFwcGVuZENoaWxkKHRvRG9MaXN0U2hvdyk7XG4gIGNvbnN0IGN1cnJlbnRQcm9qZWN0ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2N1cnJlbnRQcm9qZWN0Jyk7XG5cbiAgY29uc3QgYXJyYXlBdXggPSBjdXJyZW50UHJvamVjdCA9PT0gJ0RlZmF1bHQnXG4gICAgPyBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdEZWZhdWx0JykpXG4gICAgOiBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKGAke2N1cnJlbnRQcm9qZWN0fWApKTtcbiAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IGFycmF5QXV4Lmxlbmd0aDsgaW5kZXggKz0gMSkge1xuICAgIGNvbnN0IGNhcmQgPSBuZXcgVG9EbyhcbiAgICAgIGFycmF5QXV4W2luZGV4XS50aXRsZSxcbiAgICAgIGFycmF5QXV4W2luZGV4XS5kZXNjcmlwdGlvbixcbiAgICAgIGFycmF5QXV4W2luZGV4XS5kYXRlLFxuICAgICAgYXJyYXlBdXhbaW5kZXhdLnByaW9yaXR5LFxuICAgICAgYXJyYXlBdXhbaW5kZXhdLmlkLFxuICAgICk7XG4gICAgaWYgKGNhcmQuaWQpIHtcbiAgICAgIGNvbnN0IHJlbmRlckNhcmQgPSBjYXJkLnByaW50KCk7XG4gICAgICB0b0RvTGlzdFNob3cuYXBwZW5kQ2hpbGQocmVuZGVyQ2FyZCk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRvRG9MaXN0O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgdG9Eb0NvbGxlY3Rpb247XG4iXSwic291cmNlUm9vdCI6IiJ9