(()=>{"use strict";const t=class{constructor(t,e,n,r,l){if(this.title=t,this.description=e,this.date=n,this.priority=r,l)this.id=l;else{let t=localStorage.getItem("accToDo");t=Number(t),t+=1,this.id=t,localStorage.setItem("accToDo",t)}}removeElement(){const t=JSON.parse(localStorage.getItem("Default")),e=JSON.parse(localStorage.getItem("currentArray")),n=t=>t.id===this.id,r=t.findIndex(n),l=e.findIndex(n);t.splice(r,1),localStorage.setItem("Default",JSON.stringify(t)),e.splice(l,1);const o=localStorage.getItem("currentProject");localStorage.setItem(o,JSON.stringify(e));const i=document.getElementById(`${this.id}`);document.getElementById("toDoListShow").removeChild(i)}print(){const t=document.createElement("div");let e=null;e="low"===this.priority?"primary":"medium"===this.priority?"warning":"danger",t.setAttribute("class",`card text-white bg-${e}`),t.setAttribute("id",`${this.id}`);const n=document.createElement("div");n.setAttribute("class","card-header text-white"),n.innerHTML=this.title,t.appendChild(n);const r=document.createElement("div");r.setAttribute("class","card-body text-white"),t.appendChild(r);const l=document.createElement("h5");l.setAttribute("class","card-title text-white"),l.innerHTML=this.description,r.appendChild(l);let o=document.createElement("p");o.setAttribute("class","card-text text-white"),o.innerHTML=this.date,r.appendChild(o),o=document.createElement("p"),o.setAttribute("class","card-text text-white"),o.innerHTML=this.priority,r.appendChild(o);const i=document.createElement("div");i.setAttribute("class","row container"),t.appendChild(i);const c=document.createElement("button");return c.setAttribute("id","deleteButton"),c.setAttribute("class","col-2"),c.innerHTML="Delete",i.appendChild(c),c.addEventListener("click",(()=>this.removeElement())),t}};let e=JSON.parse(localStorage.getItem("projectsArray"));e=e||["Default"],localStorage.setItem("projectsArray",e);let n=localStorage.getItem("currentProject");n??=localStorage.setItem("currentProject","Default");let r=JSON.parse(localStorage.getItem("Default"));r??=[];let l=JSON.parse(localStorage.getItem("allToDosArray"));l??=[],localStorage.setItem("allToDosArray",JSON.stringify(l)),null==localStorage.getItem("accToDo")&&localStorage.setItem("accToDo",0);let o=localStorage.getItem("currentProject");o??=localStorage.setItem("currentProject","Default"),null==JSON.parse(localStorage.getItem("Default"))&&localStorage.setItem("Default","[]");let i=JSON.parse(localStorage.getItem("Default"));i??=[],localStorage.setItem("currentArray",JSON.stringify(i));const c=document.getElementById("content"),a=document.createElement("div");a.setAttribute("class","col-4"),a.setAttribute("id","projectList"),c.appendChild(a);const d=document.createElement("div");d.setAttribute("class","col-8"),d.setAttribute("id","toDoList"),c.appendChild(d);const s=(()=>{const l=document.getElementById("projectList"),o=document.createElement("div");o.setAttribute("class","row");const i=document.createElement("h1");i.setAttribute("class","col-8"),i.innerHTML="Projects",o.appendChild(i);const c=(()=>{const t=document.createElement("form");t.setAttribute("id","idForm");const e=document.createElement("input");e.setAttribute("type","text"),e.setAttribute("placeholder","Project name"),e.setAttribute("id","nameField"),t.appendChild(e);const n=document.createElement("span");n.setAttribute("class","col-4");const r=document.createElement("button");return r.setAttribute("type","submit"),r.setAttribute("id","buttonSubmit"),r.innerHTML="Add project",n.appendChild(r),t.appendChild(n),t})();o.appendChild(c);const a=document.createElement("ul");for(let l=0;l<e.length;l+=1){const o=document.createElement("li"),i=document.createElement("button");i.innerHTML=e[l],i.addEventListener("click",(e=>{localStorage.setItem("currentProject",e.target.innerHTML);const n=e.target.innerHTML,r=localStorage.getItem(n),l=JSON.parse(`${r}`);localStorage.setItem("currentArray",JSON.stringify(l));const o=document.getElementById("toDoListShow");o.innerHTML=null;const i="Default"===localStorage.getItem("currentProject")?JSON.parse(localStorage.getItem("Default")):JSON.parse(localStorage.getItem("currentArray"));for(let e=0;e<i.length;e+=1){const n=new t(i[e].title,i[e].description,i[e].date,i[e].priority);if(n.id){const t=n.print();o.appendChild(t),document.getElementById("toDoList").appendChild(o)}}})),o.appendChild(i),a.appendChild(o),r=JSON.parse(localStorage.getItem(n))}return l.appendChild(o),l.appendChild(a),c.children[1].children[0].addEventListener("click",(()=>{e.push(c.children[0].value);const n=document.createElement("li"),l=document.createElement("button");l.innerHTML=c.children[0].value,l.addEventListener("click",(e=>{localStorage.setItem("currentProject",e.target.innerHTML);const n=localStorage.getItem("currentProject");r=JSON.parse(localStorage.getItem(n)),localStorage.setItem("currentArray",JSON.stringify(r)),document.getElementById("toDoListShow").innerHTML=null;for(let e=0;e<r.length;e+=1){const n=new t(r[e].title,r[e].description,r[e].date,r[e].priority,r[e].id);if(n.id){const t=n.print();document.getElementById("toDoListShow").appendChild(t)}}})),localStorage.setItem("currentProject",c.children[0].value);const o=c.children[0].value;localStorage.setItem(`${o}`,JSON.stringify([])),localStorage.setItem("currentArray","[]"),document.getElementById("toDoListShow").innerHTML=null,n.appendChild(l),a.appendChild(n),localStorage.setItem("projectsArray",JSON.stringify(e))})),l})();c.appendChild(s);const u=(()=>{const e=document.getElementById("toDoList"),n=document.createElement("h2");n.setAttribute("class","text-center"),n.innerHTML="List of ToDo",e.appendChild(n);const r=document.createElement("div");r.setAttribute("class","toDoListBlock"),r.appendChild((()=>{const t=document.createElement("form"),e=document.createElement("div");t.appendChild(e);let n=document.createElement("label");n.setAttribute("for","title"),n.innerHTML="Title:",e.appendChild(n);let r=document.createElement("input");r.setAttribute("type","text"),r.setAttribute("name","title"),r.setAttribute("id","title"),e.appendChild(r);const l=document.createElement("div");t.appendChild(l),n=document.createElement("label"),n.innerHTML="Description:",n.setAttribute("for","description"),l.appendChild(n),r=document.createElement("input"),r.setAttribute("type","text"),r.setAttribute("name","description"),r.setAttribute("id","description"),l.appendChild(r);const o=document.createElement("div");t.appendChild(o),n=document.createElement("label"),n.innerHTML="Due Date: ",n.setAttribute("for","dueDate"),o.appendChild(n),r=document.createElement("input"),r.setAttribute("type","date"),r.setAttribute("name","dueDate"),r.setAttribute("id","dueDate"),o.appendChild(r);const i=document.createElement("div");t.appendChild(i),n=document.createElement("label"),n.innerHTML="Priority:",n.setAttribute("for","priority"),i.appendChild(n);for(let t=0;t<3;t+=1){let e;switch(r=document.createElement("input"),t){case 0:e="low";break;case 1:e="medium";break;case 2:e="urgent"}n=document.createElement("label"),n.setAttribute("for",e),n.innerHTML=e,i.appendChild(n),r.setAttribute("type","radio"),r.setAttribute("name",e),r.setAttribute("id",e),i.appendChild(r)}const c=document.createElement("input");return t.appendChild(c),c.setAttribute("type","submit"),c.setAttribute("id","submitButton"),t})()),e.appendChild(r);const l=document.createElement("div");l.setAttribute("id","toDoListShow"),e.appendChild(l);const o=localStorage.getItem("currentProject"),i="Default"===o?JSON.parse(localStorage.getItem("Default")):JSON.parse(localStorage.getItem(o));for(let e=0;e<i.length;e+=1){const n=new t(i[e].title,i[e].description,i[e].date,i[e].priority,i[e].id);if(n.id){const t=n.print();l.appendChild(t)}}return e})();c.appendChild(u),document.getElementById("submitButton").addEventListener("click",(e=>{e.preventDefault();const n=document.getElementById("title").value,r=document.getElementById("description").value,c=document.getElementById("dueDate").value,a=(()=>{const t=document.getElementById("low"),e=document.getElementById("medium"),n=document.getElementById("urgent");let r=null;return r=t.checked?t.name:e.checked?e.name:n.name,r})(),d=new t(n,r,c,a),s=document.getElementById("toDoListShow");s.appendChild(d.print()),l.push(d),i=JSON.parse(localStorage.getItem("currentArray")),localStorage.setItem("Default",JSON.stringify(l)),i.push(d),o=localStorage.getItem("currentProject"),localStorage.setItem("currentArray",JSON.stringify(i)),localStorage.setItem(`${o}`,JSON.stringify(i)),localStorage.setItem("allToDosArray",JSON.stringify(l)),u.appendChild(s)}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvYWRkQnV0dG9uLmpzIiwid2VicGFjazovLy8uL3NyYy90b0RvLmpzIiwid2VicGFjazovLy8uL3NyYy9wcm9qZWN0cy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3RvRG9Db2xsZWN0aW9uLmpzIl0sIm5hbWVzIjpbInRpdGxlIiwiZGVzY3JpcHRpb24iLCJkYXRlIiwicHJpb3JpdHkiLCJpZCIsInRoaXMiLCJhY2MiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiTnVtYmVyIiwic2V0SXRlbSIsImFycmF5RGVmYXVsdCIsIkpTT04iLCJwYXJzZSIsImN1cnJlbnRBcnJheSIsImZpbmRCeUlkIiwiZWxlbWVudCIsImluZGV4RGVmYXVsdCIsImZpbmRJbmRleCIsImluZGV4Q0EiLCJzcGxpY2UiLCJzdHJpbmdpZnkiLCJjdXJyZW50UHJvamVjdCIsImNhcmRUb1JlbW92ZSIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJyZW1vdmVDaGlsZCIsImNhcmQiLCJjcmVhdGVFbGVtZW50IiwiY29sb3IiLCJzZXRBdHRyaWJ1dGUiLCJpbm5lckhUTUwiLCJhcHBlbmRDaGlsZCIsImJvZHkiLCJib2R5VGl0bGUiLCJib2R5UCIsImtleXBhZCIsImRlbEJ1dHRvbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFbGVtZW50IiwicHJvamVjdHMiLCJjdXJyZW50UCIsImFycmF5Q3VycmVudCIsImFsbFRvRG9zIiwiY29udGVudCIsInB0TGlzdCIsInRvTGlzdCIsInByb2plY3RMaXN0IiwiZGl2UHJvamVjdHNCdXR0b24iLCJmb3JtIiwiaW5wdXROYW1lIiwic3BhbkFkZEJ1dHRvbiIsImFkZEJ1dHRvbiIsInVMaXN0IiwiaW5kZXgiLCJsZW5ndGgiLCJsaSIsImJ1dHRvbiIsImUiLCJ0YXJnZXQiLCJ0YXJnZXRWYWx1ZSIsImdldFZhbHVlIiwibGlzdCIsImFycmF5QXV4IiwicmVuZGVyQ2FyZCIsInByaW50IiwiY2hpbGRyZW4iLCJwdXNoIiwidmFsdWUiLCJpdGVtIiwia2V5IiwidG9Eb0xpc3QiLCJ0b0RvTGlzdEJsb2NrIiwiaW5wdXRUaXRsZU5MYWJlbCIsImxhYmVsIiwiaW5wdXQiLCJpbnB1dERlc2NyaXB0aW9uTkxhYmVsIiwiaW5wdXREdWVEYXRlTkxhYmVsIiwiaW5wdXRQcmlvcml0eU5MYWJlbCIsInN1bWJpdEJ1dHRvbiIsInRvRG9MaXN0U2hvdyIsInByZXZlbnREZWZhdWx0IiwiZGVzYyIsInByaW9yIiwicHJpb3JpdHlMb3ciLCJwcmlvcml0eU1lZGl1bSIsInByaW9yaXR5VXJnZW50IiwiY2hlY2tlZCIsIm5hbWUiLCJnZXRQcmlvcml0eSIsInRvRG8iXSwibWFwcGluZ3MiOiJtQkFBQSxNQ3VGQSxFQXZGQSxNQUNFLFlBQVlBLEVBQU9DLEVBQWFDLEVBQU1DLEVBQVVDLEdBSzlDLEdBSkFDLEtBQUtMLE1BQVFBLEVBQ2JLLEtBQUtKLFlBQWNBLEVBQ25CSSxLQUFLSCxLQUFPQSxFQUNaRyxLQUFLRixTQUFXQSxFQUNaQyxFQUNGQyxLQUFLRCxHQUFLQSxNQUNMLENBQ0wsSUFBSUUsRUFBTUMsYUFBYUMsUUFBUSxXQUMvQkYsRUFBTUcsT0FBT0gsR0FDYkEsR0FBTyxFQUNQRCxLQUFLRCxHQUFLRSxFQUNWQyxhQUFhRyxRQUFRLFVBQVdKLElBSXBDLGdCQUNFLE1BQU1LLEVBQWVDLEtBQUtDLE1BQU1OLGFBQWFDLFFBQVEsWUFDL0NNLEVBQWVGLEtBQUtDLE1BQU1OLGFBQWFDLFFBQVEsaUJBQy9DTyxFQUFZQyxHQUFZQSxFQUFRWixLQUFPQyxLQUFLRCxHQUM1Q2EsRUFBZU4sRUFBYU8sVUFBVUgsR0FDdENJLEVBQVVMLEVBQWFJLFVBQVVILEdBQ3ZDSixFQUFhUyxPQUFPSCxFQUFjLEdBQ2xDVixhQUFhRyxRQUFRLFVBQVdFLEtBQUtTLFVBQVVWLElBRS9DRyxFQUFhTSxPQUFPRCxFQUFTLEdBQzdCLE1BQU1HLEVBQWlCZixhQUFhQyxRQUFRLGtCQUM1Q0Qs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VUFBVVAsSUFDekRQLGFBQWFHLFFBQVEsZ0JBQWlCRSxLQUFLUyxVQUFVc0IsSUFDckQ0QixFQUFTdkMsWUFBWWdELE8iLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGFkZEJ1dHRvbkNvbXBvbmVudCA9ICgpID0+IHtcbiAgY29uc3QgZm9ybSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2Zvcm0nKTtcbiAgZm9ybS5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2lkRm9ybScpO1xuICBjb25zdCBpbnB1dE5hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICBpbnB1dE5hbWUuc2V0QXR0cmlidXRlKCd0eXBlJywgJ3RleHQnKTtcbiAgaW5wdXROYW1lLnNldEF0dHJpYnV0ZSgncGxhY2Vob2xkZXInLCAnUHJvamVjdCBuYW1lJyk7XG4gIGlucHV0TmFtZS5zZXRBdHRyaWJ1dGUoJ2lkJywgJ25hbWVGaWVsZCcpO1xuICBmb3JtLmFwcGVuZENoaWxkKGlucHV0TmFtZSk7XG4gIGNvbnN0IHNwYW5BZGRCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gIHNwYW5BZGRCdXR0b24uc2V0QXR0cmlidXRlKCdjbGFzcycsICdjb2wtNCcpO1xuICBjb25zdCBhZGRCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgYWRkQnV0dG9uLnNldEF0dHJpYnV0ZSgndHlwZScsICdzdWJtaXQnKTtcbiAgYWRkQnV0dG9uLnNldEF0dHJpYnV0ZSgnaWQnLCAnYnV0dG9uU3VibWl0Jyk7XG4gIGFkZEJ1dHRvbi5pbm5lckhUTUwgPSAnQWRkIHByb2plY3QnO1xuXG4gIHNwYW5BZGRCdXR0b24uYXBwZW5kQ2hpbGQoYWRkQnV0dG9uKTtcbiAgZm9ybS5hcHBlbmRDaGlsZChzcGFuQWRkQnV0dG9uKTtcblxuICByZXR1cm4gZm9ybTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGFkZEJ1dHRvbkNvbXBvbmVudDtcbiIsImNsYXNzIFRvRG8ge1xuICBjb25zdHJ1Y3Rvcih0aXRsZSwgZGVzY3JpcHRpb24sIGRhdGUsIHByaW9yaXR5LCBpZCkge1xuICAgIHRoaXMudGl0bGUgPSB0aXRsZTtcbiAgICB0aGlzLmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XG4gICAgdGhpcy5kYXRlID0gZGF0ZTtcbiAgICB0aGlzLnByaW9yaXR5ID0gcHJpb3JpdHk7XG4gICAgaWYgKGlkKSB7XG4gICAgICB0aGlzLmlkID0gaWQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCBhY2MgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYWNjVG9EbycpO1xuICAgICAgYWNjID0gTnVtYmVyKGFjYyk7XG4gICAgICBhY2MgKz0gMTtcbiAgICAgIHRoaXMuaWQgPSBhY2M7XG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYWNjVG9EbycsIGFjYyk7XG4gICAgfVxuICB9XG5cbiAgcmVtb3ZlRWxlbWVudCgpIHtcbiAgICBjb25zdCBhcnJheURlZmF1bHQgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdEZWZhdWx0JykpO1xuICAgIGNvbnN0IGN1cnJlbnRBcnJheSA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2N1cnJlbnRBcnJheScpKTtcbiAgICBjb25zdCBmaW5kQnlJZCA9IChlbGVtZW50KSA9PiBlbGVtZW50LmlkID09PSB0aGlzLmlkO1xuICAgIGNvbnN0IGluZGV4RGVmYXVsdCA9IGFycmF5RGVmYXVsdC5maW5kSW5kZXgoZmluZEJ5SWQpO1xuICAgIGNvbnN0IGluZGV4Q0EgPSBjdXJyZW50QXJyYXkuZmluZEluZGV4KGZpbmRCeUlkKTtcbiAgICBhcnJheURlZmF1bHQuc3BsaWNlKGluZGV4RGVmYXVsdCwgMSk7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ0RlZmF1bHQnLCBKU09OLnN0cmluZ2lmeShhcnJheURlZmF1bHQpKTtcblxuICAgIGN1cnJlbnRBcnJheS5zcGxpY2UoaW5kZXhDQSwgMSk7XG4gICAgY29uc3QgY3VycmVudFByb2plY3QgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY3VycmVudFByb2plY3QnKTtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShjdXJyZW50UHJvamVjdCwgSlNPTi5zdHJpbmdpZnkoY3VycmVudEFycmF5KSk7XG5cbiAgICBjb25zdCBjYXJkVG9SZW1vdmUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgJHt0aGlzLmlkfWApO1xuICAgIGNvbnN0IHNob3dUb0RvTGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b0RvTGlzdFNob3cnKTtcbiAgICBzaG93VG9Eb0xpc3QucmVtb3ZlQ2hpbGQoY2FyZFRvUmVtb3ZlKTtcbiAgfVxuXG4gIHByaW50KCkge1xuICAgIGNvbnN0IGNhcmQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBsZXQgY29sb3IgPSBudWxsO1xuICAgIGlmICh0aGlzLnByaW9yaXR5ID09PSAnbG93Jykge1xuICAgICAgY29sb3IgPSAncHJpbWFyeSc7XG4gICAgfSBlbHNlIGlmICh0aGlzLnByaW9yaXR5ID09PSAnbWVkaXVtJykge1xuICAgICAgY29sb3IgPSAnd2FybmluZyc7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbG9yID0gJ2Rhbmdlcic7XG4gICAgfVxuICAgIGNhcmQuc2V0QXR0cmlidXRlKCdjbGFzcycsIGBjYXJkIHRleHQtd2hpdGUgYmctJHtjb2xvcn1gKTtcbiAgICBjYXJkLnNldEF0dHJpYnV0ZSgnaWQnLCBgJHt0aGlzLmlkfWApO1xuXG4gICAgY29uc3QgdGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0aXRsZS5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ2NhcmQtaGVhZGVyIHRleHQtd2hpdGUnKTtcbiAgICB0aXRsZS5pbm5lckhUTUwgPSB0aGlzLnRpdGxlO1xuICAgIGNhcmQuYXBwZW5kQ2hpbGQodGl0bGUpO1xuXG4gICAgY29uc3QgYm9keSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGJvZHkuc2V0QXR0cmlidXRlKCdjbGFzcycsICdjYXJkLWJvZHkgdGV4dC13aGl0ZScpO1xuICAgIGNhcmQuYXBwZW5kQ2hpbGQoYm9keSk7XG5cbiAgICBjb25zdCBib2R5VGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoNScpO1xuICAgIGJvZHlUaXRsZS5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ2NhcmQtdGl0bGUgdGV4dC13aGl0ZScpO1xuICAgIGJvZHlUaXRsZS5pbm5lckhUTUwgPSB0aGlzLmRlc2NyaXB0aW9uO1xuICAgIGJvZHkuYXBwZW5kQ2hpbGQoYm9keVRpdGxlKTtcblxuICAgIGxldCBib2R5UCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgICBib2R5UC5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ2NhcmQtdGV4dCB0ZXh0LXdoaXRlJyk7XG4gICAgYm9keVAuaW5uZXJIVE1MID0gdGhpcy5kYXRlO1xuICAgIGJvZHkuYXBwZW5kQ2hpbGQoYm9keVApO1xuXG4gICAgYm9keVAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gICAgYm9keVAuc2V0QXR0cmlidXRlKCdjbGFzcycsICdjYXJkLXRleHQgdGV4dC13aGl0ZScpO1xuICAgIGJvZHlQLmlubmVySFRNTCA9IHRoaXMucHJpb3JpdHk7XG4gICAgYm9keS5hcHBlbmRDaGlsZChib2R5UCk7XG5cbiAgICBjb25zdCBrZXlwYWQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBrZXlwYWQuc2V0QXR0cmlidXRlKCdjbGFzcycsICdyb3cgY29udGFpbmVyJyk7XG4gICAgY2FyZC5hcHBlbmRDaGlsZChrZXlwYWQpO1xuXG4gICAgY29uc3QgZGVsQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgZGVsQnV0dG9uLnNldEF0dHJpYnV0ZSgnaWQnLCAnZGVsZXRlQnV0dG9uJyk7XG4gICAgZGVsQnV0dG9uLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnY29sLTInKTtcbiAgICBkZWxCdXR0b24uaW5uZXJIVE1MID0gJ0RlbGV0ZSc7XG4gICAga2V5cGFkLmFwcGVuZENoaWxkKGRlbEJ1dHRvbik7XG4gICAgZGVsQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5yZW1vdmVFbGVtZW50KCkpO1xuXG4gICAgcmV0dXJuIGNhcmQ7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgVG9EbztcbiIsImltcG9ydCBhZGRCdXR0b25Db21wb25lbnQgZnJvbSAnLi9hZGRCdXR0b24nO1xuaW1wb3J0IFRvRG8gZnJvbSAnLi90b0RvJztcblxubGV0IHByb2plY3RzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncHJvamVjdHNBcnJheScpKTtcbnByb2plY3RzID0gIXByb2plY3RzID8gWydEZWZhdWx0J10gOiBwcm9qZWN0cztcbmxvY2FsU3RvcmFnZS5zZXRJdGVtKCdwcm9qZWN0c0FycmF5JywgcHJvamVjdHMpO1xuXG5sZXQgY3VycmVudFAgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY3VycmVudFByb2plY3QnKTtcbmN1cnJlbnRQID8/PSBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnY3VycmVudFByb2plY3QnLCAnRGVmYXVsdCcpO1xuXG5sZXQgYXJyYXlDdXJyZW50ID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnRGVmYXVsdCcpKTtcbmFycmF5Q3VycmVudCA/Pz0gW107XG5cbmNvbnN0IHByb2plY3RMaXN0Q29tcG9uZW50ID0gKCkgPT4ge1xuICBjb25zdCBwcm9qZWN0TGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9qZWN0TGlzdCcpO1xuXG4gIGNvbnN0IGRpdlByb2plY3RzQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIGRpdlByb2plY3RzQnV0dG9uLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAncm93Jyk7XG5cbiAgY29uc3QgdGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMScpO1xuICB0aXRsZS5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ2NvbC04Jyk7XG4gIHRpdGxlLmlubmVySFRNTCA9ICdQcm9qZWN0cyc7XG4gIGRpdlByb2plY3RzQnV0dG9uLmFwcGVuZENoaWxkKHRpdGxlKTtcbiAgY29uc3QgZm9ybSA9IGFkZEJ1dHRvbkNvbXBvbmVudCgpO1xuICBkaXZQcm9qZWN0c0J1dHRvbi5hcHBlbmRDaGlsZChmb3JtKTtcblxuICBjb25zdCB1TGlzdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3VsJyk7XG5cbiAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHByb2plY3RzLmxlbmd0aDsgaW5kZXggKz0gMSkge1xuICAgIGNvbnN0IGxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcbiAgICBjb25zdCBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICBidXR0b24uaW5uZXJIVE1MID0gcHJvamVjdHNbaW5kZXhdO1xuICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnY3VycmVudFByb2plY3QnLCBlLnRhcmdldC5pbm5lckhUTUwpO1xuICAgICAgY29uc3QgdGFyZ2V0VmFsdWUgPSBlLnRhcmdldC5pbm5lckhUTUw7XG4gICAgICBjb25zdCBnZXRWYWx1ZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKHRhcmdldFZhbHVlKTtcbiAgICAgIGNvbnN0IGFycmF5Q3VycmVudCA9IEpTT04ucGFyc2UoYCR7Z2V0VmFsdWV9YCk7XG5cbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdjdXJyZW50QXJyYXknLCBKU09OLnN0cmluZ2lmeShhcnJheUN1cnJlbnQpKTtcbiAgICAgIGNvbnN0IGxpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndG9Eb0xpc3RTaG93Jyk7XG5cbiAgICAgIGxpc3QuaW5uZXJIVE1MID0gbnVsbDtcbiAgICAgIGNvbnN0IGN1cnJlbnRQID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2N1cnJlbnRQcm9qZWN0Jyk7XG4gICAgICBjb25zdCBhcnJheUF1eCA9IGN1cnJlbnRQID09PSAnRGVmYXVsdCdcbiAgICAgICAgPyBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdEZWZhdWx0JykpXG4gICAgICAgIDogSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY3VycmVudEFycmF5JykpO1xuXG4gICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgYXJyYXlBdXgubGVuZ3RoOyBpbmRleCArPSAxKSB7XG4gICAgICAgIGNvbnN0IGNhcmQgPSBuZXcgVG9EbyhcbiAgICAgICAgICBhcnJheUF1eFtpbmRleF0udGl0bGUsXG4gICAgICAgICAgYXJyYXlBdXhbaW5kZXhdLmRlc2NyaXB0aW9uLFxuICAgICAgICAgIGFycmF5QXV4W2luZGV4XS5kYXRlLFxuICAgICAgICAgIGFycmF5QXV4W2luZGV4XS5wcmlvcml0eSxcbiAgICAgICAgKTtcblxuICAgICAgICBpZiAoY2FyZC5pZCkge1xuICAgICAgICAgIGNvbnN0IHJlbmRlckNhcmQgPSBjYXJkLnByaW50KCk7XG4gICAgICAgICAgbGlzdC5hcHBlbmRDaGlsZChyZW5kZXJDYXJkKTtcbiAgICAgICAgICBjb25zdCB0b0xpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndG9Eb0xpc3QnKTtcbiAgICAgICAgICB0b0xpc3QuYXBwZW5kQ2hpbGQobGlzdCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGxpLmFwcGVuZENoaWxkKGJ1dHRvbik7XG4gICAgdUxpc3QuYXBwZW5kQ2hpbGQobGkpO1xuXG4gICAgYXJyYXlDdXJyZW50ID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShjdXJyZW50UCkpO1xuICB9XG5cbiAgcHJvamVjdExpc3QuYXBwZW5kQ2hpbGQoZGl2UHJvamVjdHNCdXR0b24pO1xuXG4gIHByb2plY3RMaXN0LmFwcGVuZENoaWxkKHVMaXN0KTtcblxuICBjb25zdCBzdWJtaXRCdXR0b24gPSBmb3JtLmNoaWxkcmVuWzFdLmNoaWxkcmVuWzBdO1xuICBzdWJtaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgcHJvamVjdHMucHVzaChmb3JtLmNoaWxkcmVuWzBdLnZhbHVlKTtcbiAgICBjb25zdCBsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XG4gICAgY29uc3QgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgYnV0dG9uLmlubmVySFRNTCA9IGZvcm0uY2hpbGRyZW5bMF0udmFsdWU7XG4gICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdjdXJyZW50UHJvamVjdCcsIGUudGFyZ2V0LmlubmVySFRNTCk7XG4gICAgICBjb25zdCBpdGVtID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2N1cnJlbnRQcm9qZWN0Jyk7XG4gICAgICBhcnJheUN1cnJlbnQgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKGl0ZW0pKTtcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdjdXJyZW50QXJyYXknLCBKU09OLnN0cmluZ2lmeShhcnJheUN1cnJlbnQpKTtcbiAgICAgIGNvbnN0IHRvRG9MID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RvRG9MaXN0U2hvdycpO1xuICAgICAgdG9Eb0wuaW5uZXJIVE1MID0gbnVsbDtcbiAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBhcnJheUN1cnJlbnQubGVuZ3RoOyBpbmRleCArPSAxKSB7XG4gICAgICAgIGNvbnN0IGNhcmQgPSBuZXcgVG9EbyhcbiAgICAgICAgICBhcnJheUN1cnJlbnRbaW5kZXhdLnRpdGxlLFxuICAgICAgICAgIGFycmF5Q3VycmVudFtpbmRleF0uZGVzY3JpcHRpb24sXG4gICAgICAgICAgYXJyYXlDdXJyZW50W2luZGV4XS5kYXRlLFxuICAgICAgICAgIGFycmF5Q3VycmVudFtpbmRleF0ucHJpb3JpdHksXG4gICAgICAgICAgYXJyYXlDdXJyZW50W2luZGV4XS5pZCxcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKGNhcmQuaWQpIHtcbiAgICAgICAgICBjb25zdCByZW5kZXJDYXJkID0gY2FyZC5wcmludCgpO1xuICAgICAgICAgIGNvbnN0IHRvRG9MaXN0U2hvdyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b0RvTGlzdFNob3cnKTtcbiAgICAgICAgICB0b0RvTGlzdFNob3cuYXBwZW5kQ2hpbGQocmVuZGVyQ2FyZCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnY3VycmVudFByb2plY3QnLCBmb3JtLmNoaWxkcmVuWzBdLnZhbHVlKTtcbiAgICBjb25zdCBrZXkgPSBmb3JtLmNoaWxkcmVuWzBdLnZhbHVlO1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGAke2tleX1gLCBKU09OLnN0cmluZ2lmeShbXSkpO1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdjdXJyZW50QXJyYXknLCAnW10nKTtcbiAgICBjb25zdCB0b0RvTGlzdFNob3cgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndG9Eb0xpc3RTaG93Jyk7XG4gICAgdG9Eb0xpc3RTaG93LmlubmVySFRNTCA9IG51bGw7XG4gICAgbGkuYXBwZW5kQ2hpbGQoYnV0dG9uKTtcbiAgICB1TGlzdC5hcHBlbmRDaGlsZChsaSk7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Byb2plY3RzQXJyYXknLCBKU09OLnN0cmluZ2lmeShwcm9qZWN0cykpO1xuICB9KTtcblxuICByZXR1cm4gcHJvamVjdExpc3Q7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBwcm9qZWN0TGlzdENvbXBvbmVudDtcbiIsImltcG9ydCBwcm9qZWN0TGlzdENvbXBvbmVudCBmcm9tICcuL3Byb2plY3RzJztcbmltcG9ydCB0b0RvQ29sbGVjdGlvbiBmcm9tICcuL3RvRG9Db2xsZWN0aW9uJztcbmltcG9ydCBUb0RvIGZyb20gJy4vdG9Ebyc7XG5cbmxldCBhbGxUb0RvcyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2FsbFRvRG9zQXJyYXknKSk7XG5hbGxUb0RvcyA/Pz0gW107XG5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYWxsVG9Eb3NBcnJheScsIEpTT04uc3RyaW5naWZ5KGFsbFRvRG9zKSk7XG5cbmNvbnN0IGN1cnJlbnRBY2MgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYWNjVG9EbycpO1xuaWYgKGN1cnJlbnRBY2MgPT0gbnVsbCkge1xuICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYWNjVG9EbycsIDApO1xufVxubGV0IGN1cnJlbnRQcm9qZWN0ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2N1cnJlbnRQcm9qZWN0Jyk7XG5jdXJyZW50UHJvamVjdCA/Pz0gbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2N1cnJlbnRQcm9qZWN0JywgJ0RlZmF1bHQnKTtcbmNvbnN0IGRlZlByb2plY3QgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdEZWZhdWx0JykpO1xuaWYgKGRlZlByb2plY3QgPT0gbnVsbCkge1xuICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnRGVmYXVsdCcsICdbXScpO1xufVxuXG5sZXQgY3VycmVudEFycmF5ID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnRGVmYXVsdCcpKTtcbmN1cnJlbnRBcnJheSA/Pz0gW107XG5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnY3VycmVudEFycmF5JywgSlNPTi5zdHJpbmdpZnkoY3VycmVudEFycmF5KSk7XG5cbmNvbnN0IGNvbnRlbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udGVudCcpO1xuXG5jb25zdCBwdExpc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxucHRMaXN0LnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnY29sLTQnKTtcbnB0TGlzdC5zZXRBdHRyaWJ1dGUoJ2lkJywgJ3Byb2plY3RMaXN0Jyk7XG5jb250ZW50LmFwcGVuZENoaWxkKHB0TGlzdCk7XG5cbmNvbnN0IHRvTGlzdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xudG9MaXN0LnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnY29sLTgnKTtcbnRvTGlzdC5zZXRBdHRyaWJ1dGUoJ2lkJywgJ3RvRG9MaXN0Jyk7XG5jb250ZW50LmFwcGVuZENoaWxkKHRvTGlzdCk7XG5cbmNvbnN0IHByb2plY3RMaXN0ID0gcHJvamVjdExpc3RDb21wb25lbnQoKTtcblxuY29udGVudC5hcHBlbmRDaGlsZChwcm9qZWN0TGlzdCk7XG5cbmNvbnN0IHRvRG9MaXN0ID0gdG9Eb0NvbGxlY3Rpb24oKTtcbmNvbnRlbnQuYXBwZW5kQ2hpbGQodG9Eb0xpc3QpO1xuXG5jb25zdCBnZXRUaXRsZSA9ICgpID0+IHtcbiAgY29uc3QgdGl0bGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGl0bGUnKTtcbiAgcmV0dXJuIHRpdGxlLnZhbHVlO1xufTtcblxuY29uc3QgZ2V0RGVzY3JpcHRpb24gPSAoKSA9PiB7XG4gIGNvbnN0IGRlc2NyaXB0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rlc2NyaXB0aW9uJyk7XG4gIHJldHVybiBkZXNjcmlwdGlvbi52YWx1ZTtcbn07XG5cbmNvbnN0IGdldERhdGUgPSAoKSA9PiB7XG4gIGNvbnN0IGRhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZHVlRGF0ZScpO1xuICByZXR1cm4gZGF0ZS52YWx1ZTtcbn07XG5cbmNvbnN0IGdldFByaW9yaXR5ID0gKCkgPT4ge1xuICBjb25zdCBwcmlvcml0eUxvdyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb3cnKTtcbiAgY29uc3QgcHJpb3JpdHlNZWRpdW0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWVkaXVtJyk7XG4gIGNvbnN0IHByaW9yaXR5VXJnZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VyZ2VudCcpO1xuICBsZXQgcHJpb3JpdHkgPSBudWxsO1xuICBpZiAocHJpb3JpdHlMb3cuY2hlY2tlZCkge1xuICAgIHByaW9yaXR5ID0gcHJpb3JpdHlMb3cubmFtZTtcbiAgfSBlbHNlIGlmIChwcmlvcml0eU1lZGl1bS5jaGVja2VkKSB7XG4gICAgcHJpb3JpdHkgPSBwcmlvcml0eU1lZGl1bS5uYW1lO1xuICB9IGVsc2Uge1xuICAgIHByaW9yaXR5ID0gcHJpb3JpdHlVcmdlbnQubmFtZTtcbiAgfVxuICByZXR1cm4gcHJpb3JpdHk7XG59O1xuXG5jb25zdCBvblN1Ym1pdEZvcm0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3VibWl0QnV0dG9uJyk7XG5vblN1Ym1pdEZvcm0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICBlLnByZXZlbnREZWZhdWx0KCk7XG4gIGNvbnN0IHRpdGxlID0gZ2V0VGl0bGUoKTtcbiAgY29uc3QgZGVzYyA9IGdldERlc2NyaXB0aW9uKCk7XG4gIGNvbnN0IGRhdGUgPSBnZXREYXRlKCk7XG4gIGNvbnN0IHByaW9yID0gZ2V0UHJpb3JpdHkoKTtcblxuICBjb25zdCB0b0RvID0gbmV3IFRvRG8odGl0bGUsIGRlc2MsIGRhdGUsIHByaW9yKTtcbiAgY29uc3QgdG9Eb0xpc3RTaG93ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RvRG9MaXN0U2hvdycpO1xuICB0b0RvTGlzdFNob3cuYXBwZW5kQ2hpbGQodG9Eby5wcmludCgpKTtcbiAgYWxsVG9Eb3MucHVzaCh0b0RvKTtcbiAgY3VycmVudEFycmF5ID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY3VycmVudEFycmF5JykpO1xuICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnRGVmYXVsdCcsIEpTT04uc3RyaW5naWZ5KGFsbFRvRG9zKSk7XG4gIGN1cnJlbnRBcnJheS5wdXNoKHRvRG8pO1xuICBjdXJyZW50UHJvamVjdCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjdXJyZW50UHJvamVjdCcpO1xuICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnY3VycmVudEFycmF5JywgSlNPTi5zdHJpbmdpZnkoY3VycmVudEFycmF5KSk7XG4gIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGAke2N1cnJlbnRQcm9qZWN0fWAsIEpTT04uc3RyaW5naWZ5KGN1cnJlbnRBcnJheSkpO1xuICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYWxsVG9Eb3NBcnJheScsIEpTT04uc3RyaW5naWZ5KGFsbFRvRG9zKSk7XG4gIHRvRG9MaXN0LmFwcGVuZENoaWxkKHRvRG9MaXN0U2hvdyk7XG59KTtcbiIsImltcG9ydCBUb0RvIGZyb20gJy4vdG9Ebyc7XG5cbmNvbnN0IGZvcm0gPSAoKSA9PiB7XG4gIGNvbnN0IGZvcm0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdmb3JtJyk7XG4gIGNvbnN0IGlucHV0VGl0bGVOTGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgZm9ybS5hcHBlbmRDaGlsZChpbnB1dFRpdGxlTkxhYmVsKTtcbiAgbGV0IGxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFiZWwnKTtcbiAgbGFiZWwuc2V0QXR0cmlidXRlKCdmb3InLCAndGl0bGUnKTtcbiAgbGFiZWwuaW5uZXJIVE1MID0gJ1RpdGxlOic7XG4gIGlucHV0VGl0bGVOTGFiZWwuYXBwZW5kQ2hpbGQobGFiZWwpO1xuXG4gIGxldCBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gIGlucHV0LnNldEF0dHJpYnV0ZSgndHlwZScsICd0ZXh0Jyk7XG4gIGlucHV0LnNldEF0dHJpYnV0ZSgnbmFtZScsICd0aXRsZScpO1xuICBpbnB1dC5zZXRBdHRyaWJ1dGUoJ2lkJywgJ3RpdGxlJyk7XG4gIGlucHV0VGl0bGVOTGFiZWwuYXBwZW5kQ2hpbGQoaW5wdXQpO1xuXG4gIGNvbnN0IGlucHV0RGVzY3JpcHRpb25OTGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgZm9ybS5hcHBlbmRDaGlsZChpbnB1dERlc2NyaXB0aW9uTkxhYmVsKTtcbiAgbGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpO1xuICBsYWJlbC5pbm5lckhUTUwgPSAnRGVzY3JpcHRpb246JztcbiAgbGFiZWwuc2V0QXR0cmlidXRlKCdmb3InLCAnZGVzY3JpcHRpb24nKTtcbiAgaW5wdXREZXNjcmlwdGlvbk5MYWJlbC5hcHBlbmRDaGlsZChsYWJlbCk7XG5cbiAgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICBpbnB1dC5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAndGV4dCcpO1xuICBpbnB1dC5zZXRBdHRyaWJ1dGUoJ25hbWUnLCAnZGVzY3JpcHRpb24nKTtcbiAgaW5wdXQuc2V0QXR0cmlidXRlKCdpZCcsICdkZXNjcmlwdGlvbicpO1xuICBpbnB1dERlc2NyaXB0aW9uTkxhYmVsLmFwcGVuZENoaWxkKGlucHV0KTtcblxuICBjb25zdCBpbnB1dER1ZURhdGVOTGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgZm9ybS5hcHBlbmRDaGlsZChpbnB1dER1ZURhdGVOTGFiZWwpO1xuICBsYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJyk7XG4gIGxhYmVsLmlubmVySFRNTCA9ICdEdWUgRGF0ZTogJztcbiAgbGFiZWwuc2V0QXR0cmlidXRlKCdmb3InLCAnZHVlRGF0ZScpO1xuICBpbnB1dER1ZURhdGVOTGFiZWwuYXBwZW5kQ2hpbGQobGFiZWwpO1xuXG4gIGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgaW5wdXQuc2V0QXR0cmlidXRlKCd0eXBlJywgJ2RhdGUnKTtcbiAgaW5wdXQuc2V0QXR0cmlidXRlKCduYW1lJywgJ2R1ZURhdGUnKTtcbiAgaW5wdXQuc2V0QXR0cmlidXRlKCdpZCcsICdkdWVEYXRlJyk7XG4gIGlucHV0RHVlRGF0ZU5MYWJlbC5hcHBlbmRDaGlsZChpbnB1dCk7XG5cbiAgY29uc3QgaW5wdXRQcmlvcml0eU5MYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICBmb3JtLmFwcGVuZENoaWxkKGlucHV0UHJpb3JpdHlOTGFiZWwpO1xuICBsYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJyk7XG4gIGxhYmVsLmlubmVySFRNTCA9ICdQcmlvcml0eTonO1xuICBsYWJlbC5zZXRBdHRyaWJ1dGUoJ2ZvcicsICdwcmlvcml0eScpO1xuICBpbnB1dFByaW9yaXR5TkxhYmVsLmFwcGVuZENoaWxkKGxhYmVsKTtcblxuICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgMzsgaW5kZXggKz0gMSkge1xuICAgIGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICBsZXQgcHJpb3JpdHk7XG4gICAgc3dpdGNoIChpbmRleCkge1xuICAgICAgY2FzZSAwOlxuICAgICAgICBwcmlvcml0eSA9ICdsb3cnO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAxOlxuICAgICAgICBwcmlvcml0eSA9ICdtZWRpdW0nO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMjpcbiAgICAgICAgcHJpb3JpdHkgPSAndXJnZW50JztcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIGxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFiZWwnKTtcbiAgICBsYWJlbC5zZXRBdHRyaWJ1dGUoJ2ZvcicsIHByaW9yaXR5KTtcbiAgICBsYWJlbC5pbm5lckhUTUwgPSBwcmlvcml0eTtcbiAgICBpbnB1dFByaW9yaXR5TkxhYmVsLmFwcGVuZENoaWxkKGxhYmVsKTtcbiAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAncmFkaW8nKTtcbiAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoJ25hbWUnLCBwcmlvcml0eSk7XG4gICAgaW5wdXQuc2V0QXR0cmlidXRlKCdpZCcsIHByaW9yaXR5KTtcbiAgICBpbnB1dFByaW9yaXR5TkxhYmVsLmFwcGVuZENoaWxkKGlucHV0KTtcbiAgfVxuXG4gIGNvbnN0IHN1bWJpdEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gIGZvcm0uYXBwZW5kQ2hpbGQoc3VtYml0QnV0dG9uKTtcbiAgc3VtYml0QnV0dG9uLnNldEF0dHJpYnV0ZSgndHlwZScsICdzdWJtaXQnKTtcbiAgc3VtYml0QnV0dG9uLnNldEF0dHJpYnV0ZSgnaWQnLCAnc3VibWl0QnV0dG9uJyk7XG4gIHJldHVybiBmb3JtO1xufTtcblxuY29uc3QgdG9Eb0NvbGxlY3Rpb24gPSAoKSA9PiB7XG4gIGNvbnN0IHRvRG9MaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RvRG9MaXN0Jyk7XG5cbiAgY29uc3QgdGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMicpO1xuICB0aXRsZS5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ3RleHQtY2VudGVyJyk7XG4gIHRpdGxlLmlubmVySFRNTCA9ICdMaXN0IG9mIFRvRG8nO1xuXG4gIHRvRG9MaXN0LmFwcGVuZENoaWxkKHRpdGxlKTtcblxuICBjb25zdCB0b0RvTGlzdEJsb2NrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIHRvRG9MaXN0QmxvY2suc2V0QXR0cmlidXRlKCdjbGFzcycsICd0b0RvTGlzdEJsb2NrJyk7XG5cbiAgdG9Eb0xpc3RCbG9jay5hcHBlbmRDaGlsZChmb3JtKCkpO1xuICB0b0RvTGlzdC5hcHBlbmRDaGlsZCh0b0RvTGlzdEJsb2NrKTtcblxuICBjb25zdCB0b0RvTGlzdFNob3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgdG9Eb0xpc3RTaG93LnNldEF0dHJpYnV0ZSgnaWQnLCAndG9Eb0xpc3RTaG93Jyk7XG4gIHRvRG9MaXN0LmFwcGVuZENoaWxkKHRvRG9MaXN0U2hvdyk7XG4gIGNvbnN0IGN1cnJlbnRQcm9qZWN0ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2N1cnJlbnRQcm9qZWN0Jyk7XG4gIGNvbnN0IGFycmF5QXV4ID0gY3VycmVudFByb2plY3QgPT09ICdEZWZhdWx0J1xuICAgID8gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnRGVmYXVsdCcpKVxuICAgIDogSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShjdXJyZW50UHJvamVjdCkpO1xuXG4gIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBhcnJheUF1eC5sZW5ndGg7IGluZGV4ICs9IDEpIHtcbiAgICBjb25zdCBjYXJkID0gbmV3IFRvRG8oXG4gICAgICBhcnJheUF1eFtpbmRleF0udGl0bGUsXG4gICAgICBhcnJheUF1eFtpbmRleF0uZGVzY3JpcHRpb24sXG4gICAgICBhcnJheUF1eFtpbmRleF0uZGF0ZSxcbiAgICAgIGFycmF5QXV4W2luZGV4XS5wcmlvcml0eSxcbiAgICAgIGFycmF5QXV4W2luZGV4XS5pZCxcbiAgICApO1xuICAgIGlmIChjYXJkLmlkKSB7XG4gICAgICBjb25zdCByZW5kZXJDYXJkID0gY2FyZC5wcmludCgpO1xuICAgICAgdG9Eb0xpc3RTaG93LmFwcGVuZENoaWxkKHJlbmRlckNhcmQpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0b0RvTGlzdDtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHRvRG9Db2xsZWN0aW9uO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==